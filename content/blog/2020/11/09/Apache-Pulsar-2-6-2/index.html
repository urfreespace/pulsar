<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.14">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Apache Pulsar RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Apache Pulsar Atom Feed"><title data-react-helmet="true">Apache Pulsar 2.6.2 | Apache Pulsar</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://pulsar.apache.com/blog/2020/11/09/Apache-Pulsar-2-6-2"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_tag" content="default"><meta data-react-helmet="true" property="og:title" content="Apache Pulsar 2.6.2 | Apache Pulsar"><meta data-react-helmet="true" name="description" content="We are excited to see that the Apache Pulsar community has successfully released the 2.6.2 version after a lot of hard work. It is a great milestone for this fast-growing project and the Pulsar community. 2.6.2 is the result of a big effort from the community, with over 154 commits and a long list of improvements and bug fixes."><meta data-react-helmet="true" property="og:description" content="We are excited to see that the Apache Pulsar community has successfully released the 2.6.2 version after a lot of hard work. It is a great milestone for this fast-growing project and the Pulsar community. 2.6.2 is the result of a big effort from the community, with over 154 commits and a long list of improvements and bug fixes."><meta data-react-helmet="true" property="og:type" content="article"><meta data-react-helmet="true" property="article:published_time" content="2020-11-09T00:00:00.000Z"><meta data-react-helmet="true" property="article:author" content="https://twitter.com/wolf4j1"><link data-react-helmet="true" rel="icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://pulsar.apache.com/blog/2020/11/09/Apache-Pulsar-2-6-2"><link data-react-helmet="true" rel="alternate" href="https://pulsar.apache.com/blog/2020/11/09/Apache-Pulsar-2-6-2" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://pulsar.apache.com/blog/2020/11/09/Apache-Pulsar-2-6-2" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.7e3a3d28.css">
<link rel="preload" href="/assets/js/runtime~main.64567627.js" as="script">
<link rel="preload" href="/assets/js/main.7befe8d6.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="tailwind navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="Apache Pulsar" class="themedImage_TMUO themedImage--light_4Vu1"><img src="/img/logo.svg" alt="Apache Pulsar" class="themedImage_TMUO themedImage--dark_uzRr"></div><b class="navbar__title"></b></a><a class="font-bold underline mr-4 -ml-4" href="/versions/">2.9.1</a><a class="navbar__item navbar__link" href="/docs/">Docs</a><a class="navbar__item navbar__link" href="/download">Download</a><a class="navbar__item navbar__link" href="/docs/client-libraries">Clients</a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" class="navbar__link">REST APIs</a><ul class="dropdown__menu"><li><a href="/admin-rest-api?version=2.9.1&amp;apiversion=v2" rel="noopener noreferrer" class="dropdown__link"><span>Admin REST API</span></a></li><li><a href="/functions-rest-api?version=2.9.1&amp;apiversion=v3" rel="noopener noreferrer" class="dropdown__link"><span>Functions</span></a></li><li><a href="/source-rest-api?version=2.9.1&amp;apiversion=v3" rel="noopener noreferrer" class="dropdown__link"><span>Sources</span></a></li><li><a href="/sink-rest-api?version=2.9.1&amp;apiversion=v3" rel="noopener noreferrer" class="dropdown__link"><span>Sinks</span></a></li><li><a href="/packages-rest-api?version=2.9.1&amp;apiversion=v3" rel="noopener noreferrer" class="dropdown__link"><span>Packages</span></a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" class="navbar__link">CLI</a><ul class="dropdown__menu"><li><a href="/pulsar-admin-cli?version=2.9.1" rel="noopener noreferrer" class="dropdown__link"><span>Pulsar Admin</span></a></li><li><a href="/pulsar-client-cli?version=2.9.1" rel="noopener noreferrer" class="dropdown__link"><span>Pulsar Client</span></a></li><li><a href="/pulsar-perf-cli?version=2.9.1" rel="noopener noreferrer" class="dropdown__link"><span>Pulsar Perf</span></a></li><li><a href="/pulsar-cli?version=2.9.1" rel="noopener noreferrer" class="dropdown__link"><span>Pulsar</span></a></li></ul></div><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/blog">Blog</a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" class="navbar__link">Community</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/contact">Contact</a></li><li><a class="dropdown__link" href="/contributing">Contributing</a></li><li><a class="dropdown__link" href="/coding-guide">Coding guide</a></li><li><a class="dropdown__link" href="/events">Events</a></li><li><a href="https://twitter.com/Apache_Pulsar" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>Twitter<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://github.com/apache/pulsar/wiki" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>Wiki<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://github.com/apache/pulsar/issues" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>Issue tracking<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://pulsar-summit.org/" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>Pulsar Summit<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a class="dropdown__link" href="/resources">Resources</a></li><li><a class="dropdown__link" href="/team">Team</a></li><li><a class="dropdown__link" href="/powered-by">Powered By</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" class="navbar__link">Apache</a><ul class="dropdown__menu"><li><a href="https://www.apache.org/" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>Foundation<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://www.apache.org/licenses/" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>License<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://www.apache.org/foundation/sponsorship.html" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>Sponsorship<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://www.apache.org/foundation/thanks.html" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>Thanks<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://www.apache.org/security" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>Security<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="navbar__items navbar__items--right"><a href="https://github.com/apache/pulsar" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_iYfV toggle_iQ2x toggleDisabled_xj38"><div class="toggleTrack_t-f2" role="button" tabindex="-1"><div class="toggleTrackCheck_mk7D"><span class="toggleIcon_pHJ9">🌜</span></div><div class="toggleTrackX_dm8H"><span class="toggleIcon_pHJ9">🌞</span></div><div class="toggleTrackThumb_W6To"></div></div><input type="checkbox" class="toggleScreenReader_h9qa" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper blog-wrapper blog-post-page"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_q+wC thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_9G5K margin-bottom--md">Recent posts</div><ul class="sidebarItemList_6T4b"><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/blog/2021/12/14/Apache-Pulsar-2-7-4">What’s New in Apache Pulsar 2.7.4</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/blog/2021/12/11/Log4j-CVE">Log4j2 Zero Day vulnerability (CVE-2021-44228)</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/blog/2021/09/23/Apache-Pulsar-2-8-1">Apache Pulsar 2.8.1</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/blog/2021/08/18/asia-cfp">Announcing Pulsar Summit Asia 2021: CFP Is Open!</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/blog/2021/08/11/Apache-Pulsar-2-7-3">Apache Pulsar 2.7.3</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><article itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h1 class="blogPostTitle_d4p0" itemprop="headline">Apache Pulsar 2.6.2</h1><div class="blogPostData_-Im+ margin-vert--md"><time datetime="2020-11-09T00:00:00.000Z" itemprop="datePublished">November 9, 2020</time> · <!-- -->11 min read</div><div class="row margin-top--md margin-bottom--sm"><div class="col col--6 authorCol_8c0z"><div class="avatar margin-bottom--sm"><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://twitter.com/wolf4j1" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Xiaolong Ran</span></a></div></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p>We are excited to see that the Apache Pulsar community has successfully released the 2.6.2 version after a lot of hard work. It is a great milestone for this fast-growing project and the Pulsar community. 2.6.2 is the result of a big effort from the community, with over 154 commits and a long list of improvements and bug fixes.</p><p>Here are some highlights and major features added in Pulsar 2.6.2.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="broker">Broker<a class="hash-link" href="#broker" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_y2LR" id="catch-throwable-when-starting-pulsar">Catch <code>throwable</code> when starting Pulsar<a class="hash-link" href="#catch-throwable-when-starting-pulsar" title="Direct link to heading">​</a></h3><p>Before 2.6.2, Pulsar catched exceptions only when <code>BrokerStarter.start()</code> failed. Some errors such as <code>NoSuchMethodError</code> or <code>NoClassDefFoundError</code> could not be caught, and Pulsar was in abnormal status yet no error log was found in the log file.</p><p>In 2.6.2, we modify exceptions to use <code>throwable</code> to avoid this issue.</p><p>For more information about implementation, see <a href="https://github.com/apache/pulsar/pull/7221" target="_blank" rel="noopener noreferrer">PR-7221</a>.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="handle-subscriptionbusyexception-in-resetcursor-api">Handle SubscriptionBusyException in resetCursor API<a class="hash-link" href="#handle-subscriptionbusyexception-in-resetcursor-api" title="Direct link to heading">​</a></h3><p>In <code>PersistentSubscription.resetCursor</code> method, <code>SubscriptionFencedException</code> is thrown in several places, but it is not handled in <code>PersistentTopicBase</code>, so error messages are not clear.</p><p>In 2.6.2, we export <code>SubscriptionBusyException</code> in <code>PersistentTopicBase</code> for <code>resetCursor</code>, so error messages in the REST API are clear. </p><p>For more information about implementation, see <a href="https://github.com/apache/pulsar/pull/7335" target="_blank" rel="noopener noreferrer">PR-7335</a>.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="update-jersey-to-231">Update Jersey to 2.31<a class="hash-link" href="#update-jersey-to-231" title="Direct link to heading">​</a></h3><p>Before 2.6.1, Pulsar used the Jersey 2.27, which has security concerns. In Pulsar 2.6.2, we update the Jersey version to the latest stable version(2.31) to enhance security.</p><p>For more information about implementation, see <a href="https://github.com/apache/pulsar/pull/7515" target="_blank" rel="noopener noreferrer">PR-7515</a>.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="stop-to-dispatch-when-consumers-using-the-key_shared-subscription-stuck">Stop to dispatch when consumers using the Key_Shared subscription stuck<a class="hash-link" href="#stop-to-dispatch-when-consumers-using-the-key_shared-subscription-stuck" title="Direct link to heading">​</a></h3><p>Consumers using the <code>Key_Shared</code> subscription would encounter disorder messages occasionally. The following are steps to reproduce the situation:</p><ol><li>Connect Consumer1 to Key_Shared subscription <code>sub</code> and stop to receive</li></ol><ul><li>receiverQueueSize: 500</li></ul><ol start="2"><li>Connect Producer and publish 500 messages with key <code>(i % 10)</code></li><li>Connect Consumer2 to same subscription and start to receive</li></ol><ul><li>receiverQueueSize: 1</li><li>since <a href="https://github.com/apache/pulsar/pull/7106" target="_blank" rel="noopener noreferrer">https://github.com/apache/pulsar/pull/7106</a>, Consumer2 can&#x27;t receive (expected)</li></ul><ol start="4"><li>Producer publish more 500 messages with same key generation algorithm</li><li>After that, Consumer1 start to receive</li><li>Check Consumer2 message ordering</li></ol><ul><li>sometimes message ordering was broken in same key</li></ul><p>In 2.6.2, when consumers use the Key_Shared subscription, Pulsar stops dispatching messages to consumers that are stuck on delivery to guarantee message order. </p><p>For more information about implementation, see <a href="https://github.com/apache/pulsar/pull/7553" target="_blank" rel="noopener noreferrer">PR-7553</a>.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="reestablish-namespace-bundle-ownership-from-false-negative-releasing-and-false-positive-acquiring">Reestablish namespace bundle ownership from false negative releasing and false positive acquiring<a class="hash-link" href="#reestablish-namespace-bundle-ownership-from-false-negative-releasing-and-false-positive-acquiring" title="Direct link to heading">​</a></h3><p>In acquiring/releasing namespace bundle ownership, ZooKeeper might be disconnected before or after these operations are persisted in the ZooKeeper cluster. It leads to inconsistency between the local ownership cache and ZooKeeper cluster.</p><p>In 2.6.2, we fix the issue with the following:</p><ul><li>In ownership releasing, do not retain ownership in failure.</li><li>In ownership checking, querying and acquiring, reestablish the lost ownership in false negative releasing and false positive acquiring.</li></ul><p>For more information about implementation, see <a href="https://github.com/apache/pulsar/pull/7773" target="_blank" rel="noopener noreferrer">PR-7773</a>.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="enable-users-to-configure-the-executor-pool-size">Enable users to configure the executor pool size<a class="hash-link" href="#enable-users-to-configure-the-executor-pool-size" title="Direct link to heading">​</a></h3><p>Before 2.6.2, the executor pool size in Pulsar was set to <code>20</code> when starting Pulsar services. Users could not configure the executor pool size.</p><div class="codeBlockContainer_J+bg theme-code-block"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">private final ScheduledExecutorService executor = Executors.newScheduledThreadPool(20,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">           new DefaultThreadFactory(&quot;pulsar&quot;));</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>In 2.6.2, users can configure the executor pool size in the <code>broker.conf</code> file based on their needs.</p><p>For more information about implementation, see <a href="https://github.com/apache/pulsar/pull/7782" target="_blank" rel="noopener noreferrer">PR-7782</a>.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="add-replicated-check-for-checkinactivesubscriptions">Add replicated check for <code>checkInactiveSubscriptions</code><a class="hash-link" href="#add-replicated-check-for-checkinactivesubscriptions" title="Direct link to heading">​</a></h3><p>After the replicated subscription is deleted by <code>checkInactiveSubscriptions</code>, replicated subscriptions are created with <code>receiveSubscriptionUpdated</code>. In this case, the position becomes the latest position.</p><div class="codeBlockContainer_J+bg theme-code-block"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">topic.createSubscription(update.getSubscriptionName(),</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        InitialPosition.Latest, true /* replicateSubscriptionState */);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>In 2.6.2, the replicated subscription is excluded from automatic deletion by fixing the <code>PersistentTopic</code>.</p><p>For more information about implementation, see <a href="https://github.com/apache/pulsar/pull/8066" target="_blank" rel="noopener noreferrer">PR-8066</a>.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="upgrade-jetty-util-version-to-9431">Upgrade jetty-util version to 9.4.31<a class="hash-link" href="#upgrade-jetty-util-version-to-9431" title="Direct link to heading">​</a></h3><p>Pulsar client depends on jetty-util. Jetty-util versions earlier than 9.4.30 contain known vulnerabilities.</p><p>In 2.6.2, we upgrade the jetty-util version to <code>9.4.31</code> to enhance security.</p><p>For more information about implementation, see <a href="https://github.com/apache/pulsar/pull/8035" target="_blank" rel="noopener noreferrer">PR-8035</a>.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="add-command-to-delete-a-clusters-metadata-from-zookeeper">Add command to delete a cluster&#x27;s metadata from ZooKeeper<a class="hash-link" href="#add-command-to-delete-a-clusters-metadata-from-zookeeper" title="Direct link to heading">​</a></h3><p>When we share the same ZooKeeper and BookKeeper cluster among multiple broker clusters, if a cluster was removed, its metadata in ZooKeeper were also removed.</p><p>In 2.6.2, we fix the issue in the following ways:</p><ul><li>Add a <code>PulsarClusterMetadataTeardown</code> class to delete the relative nodes from ZooKeeper;</li><li>Wrap the class to <code>bin/pulsar</code> script.</li></ul><p>For more information about implementation, see <a href="https://github.com/apache/pulsar/pull/8169" target="_blank" rel="noopener noreferrer">PR-8169</a>.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="replace-eventloop-with-threadpoolexecutor-to-improve-performance-instead-of-eventloop">Replace EventLoop with ThreadPoolExecutor to improve performance instead of EventLoop<a class="hash-link" href="#replace-eventloop-with-threadpoolexecutor-to-improve-performance-instead-of-eventloop" title="Direct link to heading">​</a></h3><p>In 2.6.2, we replace EventLoop with a native JDK thread pool(ThreadPoolExecutor) to improve performance.</p><p>The following is the test result with pulsar perf.</p><p>Before 2.6.1:</p><div class="codeBlockContainer_J+bg theme-code-block"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Aggregated throughput stats --- 11715556 records received --- 68813.420 msg/s --- 537.605 Mbit/s</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>In 2.6.2：</p><div class="codeBlockContainer_J+bg theme-code-block"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Aggregated throughput stats --- 18392800 records received --- 133314.602 msg/s --- 1041.520 Mbit/s</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>For more information about implementation, see <a href="https://github.com/apache/pulsar/pull/8208" target="_blank" rel="noopener noreferrer">PR-8208</a>.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="fix-deadlock-that-occurred-during-topic-ownership-check">Fix deadlock that occurred during topic ownership check<a class="hash-link" href="#fix-deadlock-that-occurred-during-topic-ownership-check" title="Direct link to heading">​</a></h3><p>Some broker servers had deadlocks while splitting namespace bundles. When checking the thread dump of the broker, some threads were blocked in <code>NamespaceService#getBundle()</code>.</p><div class="codeBlockContainer_J+bg theme-code-block"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">&quot;pulsar-ordered-OrderedExecutor-7-0&quot; #34 prio=5 os_prio=0 tid=0x00007eeeab05a800 nid=0x81a5 waiting on condition [0x00007eeeafbd2000]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  java.lang.Thread.State: WAITING (parking)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">       at sun.misc.Unsafe.park(Native Method)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">       - parking to wait for  &lt;0x00007f17fa965418&gt; (a java.util.concurrent.CompletableFuture$Signaller)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">       at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">       at org.apache.pulsar.common.naming.NamespaceBundleFactory.getBundles(NamespaceBundleFactory.java:155)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">...</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>The reason for the issue is that the <code>getBundle()</code> method leads to deadlock in <code>NamespaceService#isTopicOwned()</code>. To fix the issue, we remove the <code>getBundle()</code> method. When <code>isTopicOwned()</code> returns <code>false</code>, the bundle metadata is cached and can be got asynchronously. When the client reconnects the next time, Pulsar returns the correct bundle metadata from the cache.</p><p>For more information about implementation, see <a href="https://github.com/apache/pulsar/pull/8406" target="_blank" rel="noopener noreferrer">PR-8406</a>.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="proxy">Proxy<a class="hash-link" href="#proxy" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_y2LR" id="enable-users-to-configure-advertisedaddress-in-proxy">Enable users to configure <code>advertisedAddress</code> in proxy<a class="hash-link" href="#enable-users-to-configure-advertisedaddress-in-proxy" title="Direct link to heading">​</a></h3><p>Before 2.6.2, users could not configure <code>advertisedAddress</code> on the proxy side. In 2.6.2, users can configure <code>advertisedAddress</code> in proxy just as they do in Pulsar broker.</p><p>For more information about implementation, see <a href="https://github.com/apache/pulsar/pull/7542" target="_blank" rel="noopener noreferrer">PR-7542</a>.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="add-proxy-plugin-interface-to-support-user-defined-additional-servlet">Add proxy plugin interface to support user defined additional servlet<a class="hash-link" href="#add-proxy-plugin-interface-to-support-user-defined-additional-servlet" title="Direct link to heading">​</a></h3><p>To enable users to access the broker flexibly, Pulsar provides plugins similar to broker protocol and broker interceptor. However, users could not access the proxy before 2.6.2.</p><p>To enable users to customize data requests in proxy, we add the protocol plugin for proxy in 2.6.2.</p><p>For more information about implementation, see <a href="https://github.com/apache/pulsar/pull/8067" target="_blank" rel="noopener noreferrer">PR-8067</a>.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="fix-the-null-exception-when-starting-the-proxy-service">Fix the null exception when starting the proxy service<a class="hash-link" href="#fix-the-null-exception-when-starting-the-proxy-service" title="Direct link to heading">​</a></h3><p>When enabling the broker TLS and broker client authentication with OAuth2 plugin,
the proxy service exits with an unexpected null exception.</p><p>The reason is that when initializing the flow, authentication is called, so the token client is not initialized before using.</p><p>In 2.6.2, we fix the null exception when starting the proxy service.</p><p>For more information about implementation, see <a href="https://github.com/apache/pulsar/pull/8019" target="_blank" rel="noopener noreferrer">PR-8019</a>.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="java-client">Java Client<a class="hash-link" href="#java-client" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_y2LR" id="support-input-stream-for-truststore-cert">Support input-stream for trustStore cert<a class="hash-link" href="#support-input-stream-for-truststore-cert" title="Direct link to heading">​</a></h3><p>In 2.6.1, Pulsar supports dynamic cert loading by using input stream for TLS cert and key file. The feature is mainly used by container. However, container also requires dynamic loading for truststore certs and users cannot store trust-store cert into file-system. </p><p>In 2.6.2, Pulsar supports loading truststore cert dynamically using input stream.</p><p>For more information about implementation, see <a href="https://github.com/apache/pulsar/pull/7442" target="_blank" rel="noopener noreferrer">PR-7442</a>.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="avoid-subscribing-the-same-topic">Avoid subscribing the same topic<a class="hash-link" href="#avoid-subscribing-the-same-topic" title="Direct link to heading">​</a></h3><p>The current key of <code>MultiTopicsConsumerImpl.topics</code> is the topic name passed by the user. The <code>topicNameValid</code> method checks if the name is valid and <code>topics</code> doesn&#x27;t contain the key.</p><p>However, if a multi-topic consumer subscribes a partition of a subscribed partitioned topic,  <code>subscribeAsync</code> succeeds and a new <code>ConsumerImpl</code> of the same partition is created, which is redundant.</p><p>Also, if a multi-topic consumer subscribes <code>public/default/topic</code> or <code>persistent://public/default/topic</code>, while the initial subscribed topic is <code>topic</code>, the redundant consumers would be created.</p><p>In 2.6.2, we fix the issue in the following ways to avoid subscribing the same topic again:</p><ul><li>Use the full topic name as key for <code>MultiTopicsConsumerImpl.topics</code>.</li><li>Check that both the full topic name and the full partitioned topic name do not exist in <code>MultiTopicsConsumerImpl.topics</code> when <code>subscribeAsync</code> is called.</li><li>Throw a different exception to a different topic is invalid and the topic is already subscribed</li></ul><p>For more information about implementation, see <a href="https://github.com/apache/pulsar/pull/7823" target="_blank" rel="noopener noreferrer">PR-7823</a>.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="cpp-client">CPP Client<a class="hash-link" href="#cpp-client" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_y2LR" id="wait-for-all-seek-operations-complete">Wait for all seek operations complete<a class="hash-link" href="#wait-for-all-seek-operations-complete" title="Direct link to heading">​</a></h3><p>When a partitioned consumer calls <code>seek</code>, it waits for only one partition&#x27;s seek operation completion because each internal consumer calls callback(result) to complete the same promise.</p><p>In 2.6.2, we use the following methods to avoid this problem:</p><ul><li>Add a <code>MultiResultCallback</code> implementation, the callback completes only when all N events complete successfully or one of N events fails.</li><li>Use <code>MultiResultCallback</code> to wrap callback from <code>PartitionedConsumerImpl::seekAsync</code>.</li></ul><p>For more information about implementation, see <a href="https://github.com/apache/pulsar/pull/7216" target="_blank" rel="noopener noreferrer">PR-7216</a>.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="make-clear-thread-safe">Make <code>clear()</code> thread-safe<a class="hash-link" href="#make-clear-thread-safe" title="Direct link to heading">​</a></h3><p>Before 2.6.2, the <code>clear()</code> methods of <code>BatchAcknowledgementTracker</code> and <code>UnAckedMessageTrackerEnabled</code> are not thread-safe.</p><p>In 2.6.2, we acquire a mutex in these <code>clear()</code> methods to make it thread-safe.</p><p>For more information about implementation, see <a href="https://github.com/apache/pulsar/pull/7862" target="_blank" rel="noopener noreferrer">PR-7862</a>.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="add-snappy-library-to-docker-images-for-building-c-packages">Add Snappy library to Docker images for building C++ packages<a class="hash-link" href="#add-snappy-library-to-docker-images-for-building-c-packages" title="Direct link to heading">​</a></h3><p>The program crashes when Snappy compression is enabled on the C++ client packaged as RPM/DEB. This is because Snappy library is not included in the Docker image for building the RPM/DEB package.</p><p>In 2.6.2, we add the Snappy library to the docker images to avoid the issue.</p><p>For more information about implementation, see <a href="https://github.com/apache/pulsar/pull/8086" target="_blank" rel="noopener noreferrer">PR-8086</a>.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="support-key-based-batching">Support key based batching<a class="hash-link" href="#support-key-based-batching" title="Direct link to heading">​</a></h3><p>Support key based batching for the C++ client. In addition, currently, the implementation of <code>BatchMessageContainer</code> is coupling to <code>ProducerImpl</code> tightly. The batch message container registers a timer to the producer&#x27;s executor and the timeout callback is also the producer&#x27;s method. Even its <code>add</code> method could call <code>sendMessage</code> to send a batch to the producer&#x27;s pending queue. These should be the producer&#x27;s work.</p><p>In 2.6.2, we implement the feature in the following ways:</p><ul><li>Add a <code>MessageAndCallbackBatch</code> to store a <code>MessageImpl</code> of serialized single messages and a callback list.</li><li>Add a <code>BatchMessageContainerBase</code> to provide interface methods and methods like update/clear message number/bytes, create <code>OpSendMsg</code>.</li><li>Let <code>ProducerImpl</code> manage the batch timer and determine whether to create <code>OpSendMsg</code> from <code>BatchMessageContainerBase</code> and send it.</li><li>Make <code>BatchMessageContainer</code> inherit <code>BatchMessageContainerBase</code>, it only manages a <code>MessageAndCallbackBatch</code>.</li><li>Add a <code>BatchMessageKeyBasedContainer</code> that inherits <code>BatchMessageContainerBase</code>, it manages a map of message key and <code>MessageAndCallbackBatch</code>.</li><li>Add a producer config to change batching type.</li></ul><p>For more information about implementation, see <a href="https://github.com/apache/pulsar/pull/7996" target="_blank" rel="noopener noreferrer">PR-7996</a>.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="functions">Functions<a class="hash-link" href="#functions" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_y2LR" id="enable-kubernetes-runtime-to-customize-function-instance-class-path">Enable Kubernetes runtime to customize function instance class path<a class="hash-link" href="#enable-kubernetes-runtime-to-customize-function-instance-class-path" title="Direct link to heading">​</a></h3><p>Before 2.6.2, the function worker&#x27;s classpath is used to configure the function instance (runner)&#x27;s classpath. When the broker (function worker) uses an image that is different from the function instance (runner) for Kubernetes runtime, the classpath is wrong and the function instance could not load the instance classes.</p><p>In 2.6.2, we add a function instance classpath entry to the Kubernetes runtime config, and construct the function launch command accordingly.</p><p>For more information about implementation, see <a href="https://github.com/apache/pulsar/pull/7844" target="_blank" rel="noopener noreferrer">PR-7844</a>.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="set-dryrun-of-kubernetes-runtime-to-null">Set <code>dryrun</code> of Kubernetes Runtime to null<a class="hash-link" href="#set-dryrun-of-kubernetes-runtime-to-null" title="Direct link to heading">​</a></h3><p>Before 2.6.2, we upgraded the <code>client-java</code> of Kubernetes to <code>0.9.2</code> to enhance security. However, during the creation of statefulsets, secrets, and services, the value of <code>dryrun</code> was set to <code>true</code>, which was not accepted by Kubernetes. Only <code>All</code> is allowed in Kubernetes. </p><p>In 2.6.2, we set the <code>dryrun</code> of Kubernetes Runtime to null.</p><p>For more information about implementation, see <a href="https://github.com/apache/pulsar/pull/8064" target="_blank" rel="noopener noreferrer">PR-8064</a>.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="pulsar-sql">Pulsar SQL<a class="hash-link" href="#pulsar-sql" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_y2LR" id="upgrade-presto-version-to-332">Upgrade Presto version to 332<a class="hash-link" href="#upgrade-presto-version-to-332" title="Direct link to heading">​</a></h3><p>Upgrade Presto version to 332. Resolve different packages between prestosql and prestodb. Although the latest version is 334, versions higher than 333 require Java 11.</p><p>For more information about implementation, see <a href="https://github.com/apache/pulsar/pull/7194" target="_blank" rel="noopener noreferrer">PR-7194</a>.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="pulsar-admin">pulsar-admin<a class="hash-link" href="#pulsar-admin" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_y2LR" id="add-cli-command-to-get-the-last-message-id">Add CLI command to get the last message ID<a class="hash-link" href="#add-cli-command-to-get-the-last-message-id" title="Direct link to heading">​</a></h3><p>Add <code>last-message-id</code> command in CLI, so users can get the last message ID with this command.</p><p>For more information about implementation, see <a href="https://github.com/apache/pulsar/pull/8082" target="_blank" rel="noopener noreferrer">PR-8082</a>.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="support-deleting-schema-ledgers-when-deleting-topics">Support deleting schema ledgers when deleting topics<a class="hash-link" href="#support-deleting-schema-ledgers-when-deleting-topics" title="Direct link to heading">​</a></h3><p>Users could not delete schema of topics with the <code>PersistentTopics#deleteTopic</code> and <code>PersistentTopics#deletePartitionedTopic</code> in REST APIs. After topics were deleted, the schema ledgers still existed with adding an empty schema ledger.</p><p>In 2.6.2, we implement the feature in the following ways:</p><ul><li>Add a <code>deleteSchema</code> query param to REST APIs of deleting topics/partitioned topics;</li><li>Add a map to record the created ledgers in <code>BookkeeperSchemaStorage</code>;</li><li>Expose <code>deleteSchema</code> param in pulsar-admin APIs;</li><li>Delete schema ledgers when deleting the cluster with <code>-a</code> option.</li></ul><p>For more information about implementation, see <a href="https://github.com/apache/pulsar/pull/8167" target="_blank" rel="noopener noreferrer">PR-8167</a>.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="support-deleting-all-data-associated-with-a-cluster">Support deleting all data associated with a cluster<a class="hash-link" href="#support-deleting-all-data-associated-with-a-cluster" title="Direct link to heading">​</a></h3><p>When multiple broker clusters shared the same bookie cluster, if users wanted to remove a broker cluster, the associated ledgers in bookies were not deleted as expected.</p><p>In 2.6.2, we add a <code>cluster delete</code> command to enable users to delete all the data associated with the cluster.</p><p>For more information about implementation, see <a href="https://github.com/apache/pulsar/pull/8133" target="_blank" rel="noopener noreferrer">PR-8133</a>.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="pulsar-perf">Pulsar Perf<a class="hash-link" href="#pulsar-perf" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_y2LR" id="enable-users-to-configure-iothread-number-in-pulsar-perf">Enable users to configure ioThread number in pulsar-perf<a class="hash-link" href="#enable-users-to-configure-iothread-number-in-pulsar-perf" title="Direct link to heading">​</a></h3><p>In pulsar-perf, the default Pulsar client ioThread number is <code>Runtime.getRuntime().availableProcessors()</code> and users could not configure it in the command line. When running a pulsar-perf producer, it may cause messages to enqueue competition and lead to high latency.</p><p>In 2.6.2, we implement the feature in the following ways:</p><ol><li>Enable users to configure the ioThread number in the command line;</li><li>Change the default ioThead number from <code>Runtime.getRuntime().availableProcessors()</code> to <code>1</code></li></ol><p>For more information about implementation, see <a href="https://github.com/apache/pulsar/pull/8090" target="_blank" rel="noopener noreferrer">PR-8090</a>.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="more-information">More information<a class="hash-link" href="#more-information" title="Direct link to heading">​</a></h2><ul><li>To download Apache Pulsar 2.6.2, click <a href="https://pulsar.apache.org/en/download/" target="_blank" rel="noopener noreferrer">download</a>.</li><li>For more information about Apache Pulsar 2.6.2, see <!-- -->[2.6.2 release notes]<!-- -->(<a href="https://pulsar.apache.org/release-notes/#2.6.2" target="_blank" rel="noopener noreferrer">https://pulsar.apache.org/release-notes/#2.6.2</a> and <a href="https://github.com/apache/pulsar/pulls?q=is%3Apr+label%3Arelease%2F2.6.2+is%3Aclosed" target="_blank" rel="noopener noreferrer">2.6.2 PR list</a>.</li></ul><p>If you have any questions or suggestions, contact us with mailing lists or slack.</p><ul><li><a href="mailto:users@pulsar.apache.org" target="_blank" rel="noopener noreferrer">users@pulsar.apache.org</a></li><li><a href="mailto:dev@pulsar.apache.org" target="_blank" rel="noopener noreferrer">dev@pulsar.apache.org</a></li><li>Pulsar slack channel: <a href="https://apache-pulsar.slack.com/" target="_blank" rel="noopener noreferrer">https://apache-pulsar.slack.com/</a></li><li>Self-registration at <a href="https://apache-pulsar.herokuapp.com/" target="_blank" rel="noopener noreferrer">https://apache-pulsar.herokuapp.com/</a></li></ul><p>Looking forward to your contributions to <a href="https://github.com/apache/pulsar" target="_blank" rel="noopener noreferrer">Pulsar</a>.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/blog/2020/12/24/Apache-Pulsar-2-7-0"><div class="pagination-nav__sublabel">Newer Post</div><div class="pagination-nav__label">« <!-- -->Apache Pulsar 2.7.0</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/blog/2020/11/04/pulsar-summit-asia-schedule"><div class="pagination-nav__sublabel">Older Post</div><div class="pagination-nav__label">Pulsar Summit Asia 2020 Schedule is Now Online<!-- --> »</div></a></div></nav></main><div class="col col--2"><div class="tableOfContents_vrFS thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#broker" class="table-of-contents__link toc-highlight">Broker</a><ul><li><a href="#catch-throwable-when-starting-pulsar" class="table-of-contents__link toc-highlight">Catch <code>throwable</code> when starting Pulsar</a></li><li><a href="#handle-subscriptionbusyexception-in-resetcursor-api" class="table-of-contents__link toc-highlight">Handle SubscriptionBusyException in resetCursor API</a></li><li><a href="#update-jersey-to-231" class="table-of-contents__link toc-highlight">Update Jersey to 2.31</a></li><li><a href="#stop-to-dispatch-when-consumers-using-the-key_shared-subscription-stuck" class="table-of-contents__link toc-highlight">Stop to dispatch when consumers using the Key_Shared subscription stuck</a></li><li><a href="#reestablish-namespace-bundle-ownership-from-false-negative-releasing-and-false-positive-acquiring" class="table-of-contents__link toc-highlight">Reestablish namespace bundle ownership from false negative releasing and false positive acquiring</a></li><li><a href="#enable-users-to-configure-the-executor-pool-size" class="table-of-contents__link toc-highlight">Enable users to configure the executor pool size</a></li><li><a href="#add-replicated-check-for-checkinactivesubscriptions" class="table-of-contents__link toc-highlight">Add replicated check for <code>checkInactiveSubscriptions</code></a></li><li><a href="#upgrade-jetty-util-version-to-9431" class="table-of-contents__link toc-highlight">Upgrade jetty-util version to 9.4.31</a></li><li><a href="#add-command-to-delete-a-clusters-metadata-from-zookeeper" class="table-of-contents__link toc-highlight">Add command to delete a cluster&#39;s metadata from ZooKeeper</a></li><li><a href="#replace-eventloop-with-threadpoolexecutor-to-improve-performance-instead-of-eventloop" class="table-of-contents__link toc-highlight">Replace EventLoop with ThreadPoolExecutor to improve performance instead of EventLoop</a></li><li><a href="#fix-deadlock-that-occurred-during-topic-ownership-check" class="table-of-contents__link toc-highlight">Fix deadlock that occurred during topic ownership check</a></li></ul></li><li><a href="#proxy" class="table-of-contents__link toc-highlight">Proxy</a><ul><li><a href="#enable-users-to-configure-advertisedaddress-in-proxy" class="table-of-contents__link toc-highlight">Enable users to configure <code>advertisedAddress</code> in proxy</a></li><li><a href="#add-proxy-plugin-interface-to-support-user-defined-additional-servlet" class="table-of-contents__link toc-highlight">Add proxy plugin interface to support user defined additional servlet</a></li><li><a href="#fix-the-null-exception-when-starting-the-proxy-service" class="table-of-contents__link toc-highlight">Fix the null exception when starting the proxy service</a></li></ul></li><li><a href="#java-client" class="table-of-contents__link toc-highlight">Java Client</a><ul><li><a href="#support-input-stream-for-truststore-cert" class="table-of-contents__link toc-highlight">Support input-stream for trustStore cert</a></li><li><a href="#avoid-subscribing-the-same-topic" class="table-of-contents__link toc-highlight">Avoid subscribing the same topic</a></li></ul></li><li><a href="#cpp-client" class="table-of-contents__link toc-highlight">CPP Client</a><ul><li><a href="#wait-for-all-seek-operations-complete" class="table-of-contents__link toc-highlight">Wait for all seek operations complete</a></li><li><a href="#make-clear-thread-safe" class="table-of-contents__link toc-highlight">Make <code>clear()</code> thread-safe</a></li><li><a href="#add-snappy-library-to-docker-images-for-building-c-packages" class="table-of-contents__link toc-highlight">Add Snappy library to Docker images for building C++ packages</a></li><li><a href="#support-key-based-batching" class="table-of-contents__link toc-highlight">Support key based batching</a></li></ul></li><li><a href="#functions" class="table-of-contents__link toc-highlight">Functions</a><ul><li><a href="#enable-kubernetes-runtime-to-customize-function-instance-class-path" class="table-of-contents__link toc-highlight">Enable Kubernetes runtime to customize function instance class path</a></li><li><a href="#set-dryrun-of-kubernetes-runtime-to-null" class="table-of-contents__link toc-highlight">Set <code>dryrun</code> of Kubernetes Runtime to null</a></li></ul></li><li><a href="#pulsar-sql" class="table-of-contents__link toc-highlight">Pulsar SQL</a><ul><li><a href="#upgrade-presto-version-to-332" class="table-of-contents__link toc-highlight">Upgrade Presto version to 332</a></li></ul></li><li><a href="#pulsar-admin" class="table-of-contents__link toc-highlight">pulsar-admin</a><ul><li><a href="#add-cli-command-to-get-the-last-message-id" class="table-of-contents__link toc-highlight">Add CLI command to get the last message ID</a></li><li><a href="#support-deleting-schema-ledgers-when-deleting-topics" class="table-of-contents__link toc-highlight">Support deleting schema ledgers when deleting topics</a></li><li><a href="#support-deleting-all-data-associated-with-a-cluster" class="table-of-contents__link toc-highlight">Support deleting all data associated with a cluster</a></li></ul></li><li><a href="#pulsar-perf" class="table-of-contents__link toc-highlight">Pulsar Perf</a><ul><li><a href="#enable-users-to-configure-iothread-number-in-pulsar-perf" class="table-of-contents__link toc-highlight">Enable users to configure ioThread number in pulsar-perf</a></li></ul></li><li><a href="#more-information" class="table-of-contents__link toc-highlight">More information</a></li></ul></div></div></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Inc.Copyright © 2021 The Apache Software Foundation. All Rights Reserved. Apache, Apache Pulsar and the Apache feather logo are trademarks of The Apache Software Foundation.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.64567627.js"></script>
<script src="/assets/js/main.7befe8d6.js"></script>
</body>
</html>