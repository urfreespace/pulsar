<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.14">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Apache Pulsar RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Apache Pulsar Atom Feed"><title data-react-helmet="true">Apache Pulsar 2.6.0 | Apache Pulsar</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://pulsar.apache.com/blog/2020/06/18/Apache-Pulsar-2-6-0"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_tag" content="default"><meta data-react-helmet="true" property="og:title" content="Apache Pulsar 2.6.0 | Apache Pulsar"><meta data-react-helmet="true" name="description" content="We are very glad to see the Apache Pulsar community has successfully released the wonderful 2.6.0 version after accumulated hard work. It is a great milestone for this fast-growing project and the whole Pulsar community. This is the result of a huge effort from the community, with over 450 commits and a long list of new features, improvements, and bug fixes."><meta data-react-helmet="true" property="og:description" content="We are very glad to see the Apache Pulsar community has successfully released the wonderful 2.6.0 version after accumulated hard work. It is a great milestone for this fast-growing project and the whole Pulsar community. This is the result of a huge effort from the community, with over 450 commits and a long list of new features, improvements, and bug fixes."><meta data-react-helmet="true" property="og:type" content="article"><meta data-react-helmet="true" property="article:published_time" content="2020-06-18T00:00:00.000Z"><meta data-react-helmet="true" property="article:author" content="https://twitter.com/lipenghui6"><link data-react-helmet="true" rel="icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://pulsar.apache.com/blog/2020/06/18/Apache-Pulsar-2-6-0"><link data-react-helmet="true" rel="alternate" href="https://pulsar.apache.com/blog/2020/06/18/Apache-Pulsar-2-6-0" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://pulsar.apache.com/blog/2020/06/18/Apache-Pulsar-2-6-0" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.7e3a3d28.css">
<link rel="preload" href="/assets/js/runtime~main.64567627.js" as="script">
<link rel="preload" href="/assets/js/main.7befe8d6.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="tailwind navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="Apache Pulsar" class="themedImage_TMUO themedImage--light_4Vu1"><img src="/img/logo.svg" alt="Apache Pulsar" class="themedImage_TMUO themedImage--dark_uzRr"></div><b class="navbar__title"></b></a><a class="font-bold underline mr-4 -ml-4" href="/versions/">2.9.1</a><a class="navbar__item navbar__link" href="/docs/">Docs</a><a class="navbar__item navbar__link" href="/download">Download</a><a class="navbar__item navbar__link" href="/docs/client-libraries">Clients</a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" class="navbar__link">REST APIs</a><ul class="dropdown__menu"><li><a href="/admin-rest-api?version=2.9.1&amp;apiversion=v2" rel="noopener noreferrer" class="dropdown__link"><span>Admin REST API</span></a></li><li><a href="/functions-rest-api?version=2.9.1&amp;apiversion=v3" rel="noopener noreferrer" class="dropdown__link"><span>Functions</span></a></li><li><a href="/source-rest-api?version=2.9.1&amp;apiversion=v3" rel="noopener noreferrer" class="dropdown__link"><span>Sources</span></a></li><li><a href="/sink-rest-api?version=2.9.1&amp;apiversion=v3" rel="noopener noreferrer" class="dropdown__link"><span>Sinks</span></a></li><li><a href="/packages-rest-api?version=2.9.1&amp;apiversion=v3" rel="noopener noreferrer" class="dropdown__link"><span>Packages</span></a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" class="navbar__link">CLI</a><ul class="dropdown__menu"><li><a href="/pulsar-admin-cli?version=2.9.1" rel="noopener noreferrer" class="dropdown__link"><span>Pulsar Admin</span></a></li><li><a href="/pulsar-client-cli?version=2.9.1" rel="noopener noreferrer" class="dropdown__link"><span>Pulsar Client</span></a></li><li><a href="/pulsar-perf-cli?version=2.9.1" rel="noopener noreferrer" class="dropdown__link"><span>Pulsar Perf</span></a></li><li><a href="/pulsar-cli?version=2.9.1" rel="noopener noreferrer" class="dropdown__link"><span>Pulsar</span></a></li></ul></div><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/blog">Blog</a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" class="navbar__link">Community</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/contact">Contact</a></li><li><a class="dropdown__link" href="/contributing">Contributing</a></li><li><a class="dropdown__link" href="/coding-guide">Coding guide</a></li><li><a class="dropdown__link" href="/events">Events</a></li><li><a href="https://twitter.com/Apache_Pulsar" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>Twitter<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://github.com/apache/pulsar/wiki" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>Wiki<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://github.com/apache/pulsar/issues" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>Issue tracking<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://pulsar-summit.org/" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>Pulsar Summit<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a class="dropdown__link" href="/resources">Resources</a></li><li><a class="dropdown__link" href="/team">Team</a></li><li><a class="dropdown__link" href="/powered-by">Powered By</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" class="navbar__link">Apache</a><ul class="dropdown__menu"><li><a href="https://www.apache.org/" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>Foundation<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://www.apache.org/licenses/" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>License<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://www.apache.org/foundation/sponsorship.html" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>Sponsorship<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://www.apache.org/foundation/thanks.html" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>Thanks<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://www.apache.org/security" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>Security<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="navbar__items navbar__items--right"><a href="https://github.com/apache/pulsar" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_iYfV toggle_iQ2x toggleDisabled_xj38"><div class="toggleTrack_t-f2" role="button" tabindex="-1"><div class="toggleTrackCheck_mk7D"><span class="toggleIcon_pHJ9">🌜</span></div><div class="toggleTrackX_dm8H"><span class="toggleIcon_pHJ9">🌞</span></div><div class="toggleTrackThumb_W6To"></div></div><input type="checkbox" class="toggleScreenReader_h9qa" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper blog-wrapper blog-post-page"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_q+wC thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_9G5K margin-bottom--md">Recent posts</div><ul class="sidebarItemList_6T4b"><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/blog/2021/12/14/Apache-Pulsar-2-7-4">What’s New in Apache Pulsar 2.7.4</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/blog/2021/12/11/Log4j-CVE">Log4j2 Zero Day vulnerability (CVE-2021-44228)</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/blog/2021/09/23/Apache-Pulsar-2-8-1">Apache Pulsar 2.8.1</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/blog/2021/08/18/asia-cfp">Announcing Pulsar Summit Asia 2021: CFP Is Open!</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/blog/2021/08/11/Apache-Pulsar-2-7-3">Apache Pulsar 2.7.3</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><article itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h1 class="blogPostTitle_d4p0" itemprop="headline">Apache Pulsar 2.6.0</h1><div class="blogPostData_-Im+ margin-vert--md"><time datetime="2020-06-18T00:00:00.000Z" itemprop="datePublished">June 18, 2020</time> · <!-- -->17 min read</div><div class="row margin-top--md margin-bottom--sm"><div class="col col--6 authorCol_8c0z"><div class="avatar margin-bottom--sm"><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://twitter.com/lipenghui6" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Penghui Li</span></a></div></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p>We are very glad to see the Apache Pulsar community has successfully released the wonderful 2.6.0 version after accumulated hard work. It is a great milestone for this fast-growing project and the whole Pulsar community. This is the result of a huge effort from the community, with over 450 commits and a long list of new features, improvements, and bug fixes.</p><p>Here is a selection of some of the most interesting and major features added to Pulsar 2.6.0.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="core-pulsar">Core Pulsar<a class="hash-link" href="#core-pulsar" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_y2LR" id="pip-37-large-message-size-support">[PIP-37]<!-- --> Large message size support<a class="hash-link" href="#pip-37-large-message-size-support" title="Direct link to heading">​</a></h3><p>This PIP adds support for producing and consuming large size messages by splitting the large message into multiple chunks. This is a very powerful feature for sending and consuming very large messages.</p><p>Currently, this feature only works for the non-shared subscription and it has client-side changes. You need to upgrade the Pulsar client version to 2.6.0. You can enable the message trunk at the producer side as below.</p><div class="codeBlockContainer_J+bg language-java theme-code-block"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">client.newProducer()</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    .topic(&quot;my-topic&quot;)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    .enableChunking(true)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    .create();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>For more information about PIP-37, see <a href="https://github.com/apache/pulsar/wiki/PIP-37:-Large-message-size-handling-in-Pulsar" target="_blank" rel="noopener noreferrer">here</a>. <br> For more information about implementation details, see <a href="https://github.com/apache/pulsar/pull/4400" target="_blank" rel="noopener noreferrer">PR-4440</a>.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="pip-39-namespace-change-events-system-topic">[PIP-39]<!-- --> Namespace change events (system topic)<a class="hash-link" href="#pip-39-namespace-change-events-system-topic" title="Direct link to heading">​</a></h3><p>This PIP introduces the system topic to store namespace change events. Previously, Pulsar only allowed you to set the namespace policy, all topics under the namespace followed the namespace policy. Many users want to set the policy for topics. The main reason for not using the same way as namespace level policy is to avoid introducing more workload on the ZooKeeper. </p><p>The original intention of the system topic is to be able to store topic policy in a topic rather than ZooKeeper. So this is the first step to achieve topic level policy. And we can easily add support for the topic level policy with this feature.</p><p>For more information about PIP-39, see <a href="https://github.com/apache/pulsar/wiki/PIP-39%3A-Namespace-Change-Events" target="_blank" rel="noopener noreferrer">here</a>.<br> For more information about implementation details, see  <a href="https://github.com/apache/pulsar/pull/4955" target="_blank" rel="noopener noreferrer">PR-4955</a>.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="pip-45-pluggable-metadata-interface">[PIP-45]<!-- --> Pluggable metadata interface<a class="hash-link" href="#pip-45-pluggable-metadata-interface" title="Direct link to heading">​</a></h3><p>We have been advancing to enable Pulsar to use other metastore services rather than ZooKeeper. This PIP converts <code>ManagedLedger</code> to use the <code>MetadataStore</code> interface. This facilitates the metadata server plug-in process. Through the <code>MetadataStore</code> interface, it is easy to add other metadata servers into Pulsar such as <a href="https://github.com/etcd-io/etcd" target="_blank" rel="noopener noreferrer">etcd</a>.</p><p>For more information about PIP-45, see <a href="https://github.com/apache/pulsar/wiki/PIP-45%3A-Pluggable-metadata-interface" target="_blank" rel="noopener noreferrer">here</a>. <br> For more information about implementation details, see <a href="https://github.com/apache/pulsar/pull/5358" target="_blank" rel="noopener noreferrer">PR-5358</a>.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="pip-54-support-acknowledgment-at-the-batch-index-level">[PIP-54]<!-- --> Support acknowledgment at the batch index level<a class="hash-link" href="#pip-54-support-acknowledgment-at-the-batch-index-level" title="Direct link to heading">​</a></h3><p>Previously, the broker only tracked the acknowledged state in the batch message level. If a subset of the batch messages was acknowledged, the consumer could still get the acknowledged message of that batch message while the batch message redelivery happened. </p><p>This PIP adds support for acknowledging the local batch index of a batch. This feature is not enabled by default. You can enable it in the <code>broker.conf</code> as below.</p><div class="codeBlockContainer_J+bg theme-code-block"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">acknowledgmentAtBatchIndexLevelEnabled=true</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>For more information about PIP-54, see <a href="https://github.com/apache/pulsar/wiki/PIP-54:-Support-acknowledgment-at-batch-index-level" target="_blank" rel="noopener noreferrer">here</a>. <br> For more information about implementation details, see <a href="https://github.com/apache/pulsar/pull/6052" target="_blank" rel="noopener noreferrer">PR-6052</a>.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="pip-58-support-consumers-setting-custom-message-retry-delay">[PIP-58]<!-- --> Support consumers setting custom message retry delay<a class="hash-link" href="#pip-58-support-consumers-setting-custom-message-retry-delay" title="Direct link to heading">​</a></h3><p>For many online business systems, various exceptions usually occur in business logic processing, so the message needs to be re-consumed, but users hope that this delay time can be controlled flexibly. Previously, processing methods were usually to send messages to special retry topics, because production can specify any delay, so consumers subscribe to the business topic and retry topic at the same time. Now you can set a retry delay for each message as below.</p><div class="codeBlockContainer_J+bg language-java theme-code-block"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Consumer&lt;byte[]&gt; consumer = pulsarClient.newConsumer(Schema.BYTES)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    .enableRetry(true)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    .receiverQueueSize(100)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    .deadLetterPolicy(DeadLetterPolicy.builder()</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        .maxRedeliverCount(maxRedeliveryCount)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        .retryLetterTopic(&quot;persistent://my-property/my-ns/my-subscription-custom-Retry&quot;)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        .build())</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    .subscribe();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">consumer.reconsumeLater(message, 10, TimeUnit.SECONDS);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>For more information about PIP-58, see <a href="https://github.com/apache/pulsar/wiki/PIP-58-%3A-Support-Consumers--Set-Custom-Retry-Delay" target="_blank" rel="noopener noreferrer">here</a>. <br> For more information about implementation details, see <a href="https://github.com/apache/pulsar/pull/6449" target="_blank" rel="noopener noreferrer">PR-6449</a>.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="pip-60-support-sni-routing-to-support-various-proxy-servers">[PIP-60]<!-- --> Support SNI routing to support various proxy servers<a class="hash-link" href="#pip-60-support-sni-routing-to-support-various-proxy-servers" title="Direct link to heading">​</a></h3><p>Previously, Pulsar did not provide support to use other proxies, such as Apache Traffic Server (ATS), HAProxy, Nginx, and Envoy, which are more scalable and secured. Most of these proxy servers support SNI routing which can route traffic to a destination without having to terminate the SSL connection. This PIP adds SNI routing and makes changes to the Pulsar client.</p><p>For more information about PIP-60, see <a href="https://github.com/apache/pulsar/wiki/PIP-60:-Support-Proxy-server-with-SNI-routing" target="_blank" rel="noopener noreferrer">here</a>. <br> For more information about implementation details, see  <a href="https://github.com/apache/pulsar/pull/6566" target="_blank" rel="noopener noreferrer">PR-6566</a>.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="pip-61-advertise-multiple-addresses">[PIP-61]<!-- --> Advertise multiple addresses<a class="hash-link" href="#pip-61-advertise-multiple-addresses" title="Direct link to heading">​</a></h3><p>This PIP allows the broker to expose multiple advertised listeners and to support the separation of internal and external network traffic. You can specify multiple advertised listeners in <code>broker.conf</code> as below.</p><div class="codeBlockContainer_J+bg theme-code-block"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">advertisedListeners=internal:pulsar://192.168.1.11:6660,external:pulsar://110.95.234.50:6650</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>From the client side, you can specify the listener name for the client as below.</p><div class="codeBlockContainer_J+bg language-java theme-code-block"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">PulsarClient.builder()</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    .serviceUrl(url)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    .listenerName(&quot;internal&quot;)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    .build();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>For more information about PIP-61, see <a href="https://github.com/apache/pulsar/wiki/PIP-61%3A-Advertised-multiple-addresses" target="_blank" rel="noopener noreferrer">here</a>. <br> For more information about implementation details, see <a href="https://github.com/apache/pulsar/pull/6903" target="_blank" rel="noopener noreferrer">PR-6903</a>.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="pip-65-adapt-pulsar-io-sources-to-support-batchsources">[PIP-65]<!-- --> Adapt Pulsar IO sources to support <code>BatchSources</code><a class="hash-link" href="#pip-65-adapt-pulsar-io-sources-to-support-batchsources" title="Direct link to heading">​</a></h3><p>This PIP introduces <code>BatchSource</code> as a new interface for writing batch-based connectors. It also introduces <code>BatchSourceTriggerer</code> as an interface to trigger the data collection of a <code>BatchSource</code>. It then provides system implementation in <code>BatchSourceExecutor</code>.</p><p>For more information about PIP-65, see <a href="https://github.com/apache/pulsar/wiki/PIP-65%3A-Adapting-Pulsar-IO-Sources-to-support-Batch-Sources" target="_blank" rel="noopener noreferrer">here</a>. <br> For more information about implementation details, see <a href="https://github.com/apache/pulsar/pull/7090" target="_blank" rel="noopener noreferrer">PR-7090</a>.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="load-balancer-add-thresholdshedder-strategy-for-the-load-balancer">[Load balancer]<!-- --> Add <code>ThresholdShedder</code> strategy for the load balancer<a class="hash-link" href="#load-balancer-add-thresholdshedder-strategy-for-the-load-balancer" title="Direct link to heading">​</a></h3><p>The <code>ThresholdShedder</code> strategy is more flexible than <code>LoadSheddingStrategy</code> for Pulsar. The <code>ThresholdShedder</code> calculates the average resource usage of the brokers, and individual broker resource usage compares with the average value. If it is greater than the average value plus threshold, the overload shedder is triggered. You can enable it in <code>broker.conf</code> as below.</p><div class="codeBlockContainer_J+bg theme-code-block"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">loadBalancerLoadSheddingStrategy=org.apache.pulsar.broker.loadbalance.impl.ThresholdShedder</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>You can customize more parameters for the <code>ThresholdShedder</code> if needed as below.</p><div class="codeBlockContainer_J+bg theme-code-block"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># The broker resource usage threshold.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># When the broker resource usage is greater than the pulsar cluster average resource usage,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># the threshold shedder will be triggered to offload bundles from the broker.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># It only takes effect in ThresholdShedder strategy.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">loadBalancerBrokerThresholdShedderPercentage=10</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># When calculating new resource usage, the history usage accounts for.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># It only takes effect in ThresholdShedder strategy.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">loadBalancerHistoryResourcePercentage=0.9</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># The BandWithIn usage weight when calculating new resource usage.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># It only takes effect in ThresholdShedder strategy.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">loadBalancerBandwithInResourceWeight=1.0</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># The BandWithOut usage weight when calculating new resource usage.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># It only takes effect in ThresholdShedder strategy.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">loadBalancerBandwithOutResourceWeight=1.0</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># The CPU usage weight when calculating new resource usage.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># It only takes effect in ThresholdShedder strategy.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">loadBalancerCPUResourceWeight=1.0</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># The heap memory usage weight when calculating new resource usage.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># It only takes effect in ThresholdShedder strategy.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">loadBalancerMemoryResourceWeight=1.0</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># The direct memory usage weight when calculating new resource usage.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># It only takes effect in ThresholdShedder strategy.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">loadBalancerDirectMemoryResourceWeight=1.0</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Bundle unload minimum throughput threshold (MB), avoiding bundle unload frequently.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># It only takes effect in ThresholdShedder strategy.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">loadBalancerBundleUnloadMinThroughputThreshold=10</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>For more information about implementation details, see <a href="https://github.com/apache/pulsar/pull/6772" target="_blank" rel="noopener noreferrer">PR-6772</a>.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="key-shared-add-consistent-hashing-in-the-key_shared-distribution">[Key Shared]<!-- --> Add consistent hashing in the Key_Shared distribution<a class="hash-link" href="#key-shared-add-consistent-hashing-in-the-key_shared-distribution" title="Direct link to heading">​</a></h3><p>Previously, the implementation of the Key_Shared subscription used a mechanism to divide their hash space across the available consumers. This was based on dividing the currently assigned hash ranges when a new consumer joined or left. Pulsar 2.6.0 introduces a new consistent hash distribution for the Key_Shared subscription. You can enable the consistent hash distribution in <code>broker.conf</code> and the auto split approach is still selected by default.</p><div class="codeBlockContainer_J+bg theme-code-block"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># On KeyShared subscriptions, with default AUTO_SPLIT mode, use splitting ranges or</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># consistent hashing to reassign keys to new consumers</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">subscriptionKeySharedUseConsistentHashing=false</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># On KeyShared subscriptions, number of points in the consistent-hashing ring.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># The higher the number, the more equal the assignment of keys to consumers</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">subscriptionKeySharedConsistentHashingReplicaPoints=100</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>We plan to use consistent hash distribution by default in the subsequent versions.
For more information about implementation details, see  <a href="https://github.com/apache/pulsar/pull/6791" target="_blank" rel="noopener noreferrer">PR-6791</a>.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="key-shared-fix-ordering-issue-in-keyshared-dispatcher-when-adding-consumers">[Key Shared]<!-- --> Fix ordering issue in KeyShared dispatcher when adding consumers<a class="hash-link" href="#key-shared-fix-ordering-issue-in-keyshared-dispatcher-when-adding-consumers" title="Direct link to heading">​</a></h3><p>This is a great fix for the Key_Shared subscription. Previously, ordering was broken in a KeyShared dispatcher if a new consumer c2 came in and an existing consumer c1 went out. This was because messages with keys previously assigned to c1 may route to c2, which might break the message ordering dispatch guarantee in the Key_Shared subscription. This PR introduces new consumers joining in a &quot;paused&quot; state until the previous messages are acknowledged to ensure the messages are dispatched orderly. </p><p>If you still want the relaxed ordering, you can set up at the consumer side as below.</p><div class="codeBlockContainer_J+bg language-java theme-code-block"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">pulsarClient.newConsumer()</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    .keySharedPolicy(KeySharedPolicy.autoSplitHashRange().setAllowOutOfOrderDelivery(true))</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    .subscribe();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>For more information about implementation details, see <a href="https://github.com/apache/pulsar/pull/7106" target="_blank" rel="noopener noreferrer">PR-7106</a> and <a href="https://github.com/apache/pulsar/pull/7108" target="_blank" rel="noopener noreferrer">PR-7108</a>.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="key-shared-add-support-for-key-hash-range-reading">[Key Shared]<!-- --> Add support for key hash range reading<a class="hash-link" href="#key-shared-add-support-for-key-hash-range-reading" title="Direct link to heading">​</a></h3><p>This PR supports sticky key hash range reader. A broker only dispatches messages whose hash of the message key contains by a specified key hash range. Besides, multiple key hash ranges can be specified on a reader.</p><div class="codeBlockContainer_J+bg language-java theme-code-block"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">pulsarClient.newReader()</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    .topic(topic)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    .startMessageId(MessageId.earliest)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    .keyHashRange(Range.of(0, 10000), Range.of(20001, 30000))</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    .create();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>For more information about implementation details, see  <a href="https://github.com/apache/pulsar/pull/5928" target="_blank" rel="noopener noreferrer">PR-5928</a>.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="use-pure-java-air-compressor-instead-of-jni-based-libraries">Use pure-java Air-Compressor instead of JNI based libraries<a class="hash-link" href="#use-pure-java-air-compressor-instead-of-jni-based-libraries" title="Direct link to heading">​</a></h3><p>Previously, JNI based libraries were used to perform data compression. While these libraries do have an overhead in terms of size and affect the JNI overhead which is typically measurable when compressing many small payloads. This PR replaces compression libraries for LZ4, ZStd, and Snappy with <a href="https://github.com/airlift/aircompressor" target="_blank" rel="noopener noreferrer">AirCompressor</a>, which is a pure Java compression library used by Presto.</p><p>For more information about implementation details, see  <a href="https://github.com/apache/pulsar/pull/5390" target="_blank" rel="noopener noreferrer">PR-5390</a>.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="support-multiple-pulsar-clusters-using-the-same-bookkeeper-cluster">Support multiple Pulsar clusters using the same BookKeeper cluster<a class="hash-link" href="#support-multiple-pulsar-clusters-using-the-same-bookkeeper-cluster" title="Direct link to heading">​</a></h3><p>This PR allows multiple pulsar clusters to use the specified BookKeeper cluster by pointing BookKeeper client to the ZooKeeper connection string of BookKeeper cluster. This PR adds a configuration (<code>bookkeeperMetadataServiceUri</code>) to discover BookKeeper cluster metadata store and uses metadata service URI to initialize BookKeeper clients.</p><div class="codeBlockContainer_J+bg theme-code-block"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Metadata service uri that bookkeeper is used for loading corresponding metadata driver</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># and resolving its metadata service location.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># This value can be fetched using `bookkeeper shell whatisinstanceid` command in BookKeeper cluster.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># For example: zk+hierarchical://localhost:2181/ledgers</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># The metadata service uri list can also be semicolon separated values like below:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># zk+hierarchical://zk1:2181;zk2:2181;zk3:2181/ledgers</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">bookkeeperMetadataServiceUri=</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>For more information about implementation details, see <a href="https://github.com/apache/pulsar/pull/5985" target="_blank" rel="noopener noreferrer">PR-5985</a>.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="support-deleting-inactive-topics-when-subscriptions-are-caught-up">Support deleting inactive topics when subscriptions are caught up<a class="hash-link" href="#support-deleting-inactive-topics-when-subscriptions-are-caught-up" title="Direct link to heading">​</a></h3><p>Previously, Pulsar supported deleting inactive topics which do not have active producers and subscriptions. This PR supports deleting inactive topics when all subscriptions of the topic are caught up and when there are no active producers or consumers. This PR exposes inactive topic delete mode in <code>broker.conf</code>. In the future, we can support a namespace level configuration for the inactive topic delete mode.</p><div class="codeBlockContainer_J+bg theme-code-block"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Set the inactive topic delete mode. Default is delete_when_no_subscriptions</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># &#x27;delete_when_no_subscriptions&#x27; mode only delete the topic which has no subscriptions and no active producers</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># &#x27;delete_when_subscriptions_caught_up&#x27; mode only delete the topic that all subscriptions has no backlogs(caught up)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># and no active producers/consumers</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">brokerDeleteInactiveTopicsMode=delete_when_no_subscriptions</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>For more information about implementation details, see <a href="https://github.com/apache/pulsar/pull/6077" target="_blank" rel="noopener noreferrer">PR-6077</a>.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="add-a-flag-to-skip-broker-shutdown-on-transient-oom">Add a flag to skip broker shutdown on transient OOM<a class="hash-link" href="#add-a-flag-to-skip-broker-shutdown-on-transient-oom" title="Direct link to heading">​</a></h3><p>A high dispatch rate on one of the topics may cause a broker to go OOM temporarily. It is a transient error and the broker can recover within a few seconds as soon as some memory gets released. However, in 2.4 release (<a href="https://github.com/apache/pulsar/pull/4196" target="_blank" rel="noopener noreferrer">#4196</a>), the “restarted broker on OOM” feature can cause huge instability in a cluster, where a topic moves from one broker to another and restarts multiple brokers and disrupts other topics as well. So this PR provides a dynamic flag to skip broker shutdown on OOM to avoid instability in a cluster.</p><p>For more information about implementation details, see <a href="https://github.com/apache/pulsar/pull/6634" target="_blank" rel="noopener noreferrer">PR-6634</a>.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="make-zookeeper-cache-expiry-time-configurable">Make ZooKeeper cache expiry time configurable<a class="hash-link" href="#make-zookeeper-cache-expiry-time-configurable" title="Direct link to heading">​</a></h3><p>Previously, ZooKeeper cache expiry time was hardcoded and it needed to be configurable to refresh the value based on various requirements, for example, refreshing the value quickly in case of zk-watch miss, avoiding frequent cache refresh to avoid zk-read or avoiding issue due to zk read timeout, and so on. Now you can configure ZooKeeper cache expiry time in <code>broker.conf</code> as below.</p><div class="codeBlockContainer_J+bg theme-code-block"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># ZooKeeper cache expiry time in seconds</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">zooKeeperCacheExpirySeconds=300</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>For more information about implementation details, see <a href="https://github.com/apache/pulsar/pull/6668" target="_blank" rel="noopener noreferrer">PR-6668</a>.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="optimize-consumer-fetch-messages-in-case-of-batch-message">Optimize consumer fetch messages in case of batch message<a class="hash-link" href="#optimize-consumer-fetch-messages-in-case-of-batch-message" title="Direct link to heading">​</a></h3><p>When a consumer sends a fetch request to a broker server, it contains a fetch message number telling the server how many messages should be pushed to a consumer client. However, the broker server stores data in BookKeeper or broker cache according to entry rather than a single message if the producer produces messages using the batch feature. There is a gap to map the number of messages to the number of entries when dealing with consumer fetch requests. This PR adds a variable <code>avgMessagesPerEntry</code> to record average messages stored in one entry. It updates when a broker server pushes messages to a consumer. When dealing with consumer fetch requests, it maps fetch request number to entry number. Additionally, this PR exposes the <code>avgMessagePerEntry</code> static value to consumer stat metric json.</p><p>You can enable <code>preciseDispatcherFlowControl</code> in <code> broker.conf</code> as below.</p><div class="codeBlockContainer_J+bg theme-code-block"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Precise dispatcher flow control according to history message number of each entry</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">preciseDispatcherFlowControl=false</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>For more information about implementation details, see  <a href="https://github.com/apache/pulsar/pull/6719" target="_blank" rel="noopener noreferrer">PR-6719</a></p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="introduce-precise-topic-publish-rate-limiting">Introduce precise topic publish rate limiting<a class="hash-link" href="#introduce-precise-topic-publish-rate-limiting" title="Direct link to heading">​</a></h3><p>Previously, Pulsar supported the publish rate limiting but it is not a precise control. Now, for some use cases that need precise control, you can enable it in <code>broker.conf</code> as below.</p><div class="codeBlockContainer_J+bg theme-code-block"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">preciseTopicPublishRateLimiterEnable=true</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>For more information about implementation details, see  <a href="https://github.com/apache/pulsar/pull/7078" target="_blank" rel="noopener noreferrer">PR-7078</a>.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="expose-check-delay-of-new-entries-in-brokerconf">Expose check delay of new entries in <code>broker.conf</code><a class="hash-link" href="#expose-check-delay-of-new-entries-in-brokerconf" title="Direct link to heading">​</a></h3><p>Previously, the check delay of new entries was 10 ms and could not be changed by users. Currently, for consumption latency sensitive scenarios, you can set the value of check delay of new entries to a smaller value or 0 in <code>broker.conf</code> as below. Using a smaller value may degrade consumption throughput. </p><div class="codeBlockContainer_J+bg theme-code-block"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">managedLedgerNewEntriesCheckDelayInMillis=10</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>For more information about implementation details, see  <a href="https://github.com/apache/pulsar/pull/7154" target="_blank" rel="noopener noreferrer">PR-7154</a>.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="schema--supports-null-key-and-null-value-in-keyvalue-schema">[Schema]<!-- -->  Supports <code>null</code> key and <code>null</code> value in KeyValue schema<a class="hash-link" href="#schema--supports-null-key-and-null-value-in-keyvalue-schema" title="Direct link to heading">​</a></h3><p>For more information about implementation details, see  <a href="https://github.com/apache/pulsar/pull/7139" target="_blank" rel="noopener noreferrer">PR-7139</a>.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="support-triggering-ledger-rollover-when-maxledgerrollovertimeminutes-is-met">Support triggering ledger rollover when <code>maxLedgerRolloverTimeMinutes</code> is met<a class="hash-link" href="#support-triggering-ledger-rollover-when-maxledgerrollovertimeminutes-is-met" title="Direct link to heading">​</a></h3><p>This PR implements a monitoring thread to check if the current topic ledger meets the constraint of <code>managedLedgerMaxLedgerRolloverTimeMinutes</code> and triggers a rollover to make the configuration take effect. Another important idea is that if you trigger a rollover, you can close the current ledger so that you can release the storage of the current ledger. For some less commonly used topics, the current ledger data is likely to be expired and the current rollover logic is only triggered when adding a new entry. Obviously, this results in a waste of disk space. The monitoring thread is scheduled at a fixed time interval and the interval is set to <code>managedLedgerMaxLedgerRolloverTimeMinutes</code>. Each inspection makes two judgments at the same time, for example, <code>currentLedgerEntries &gt; 0</code> and <code>currentLedgerIsFull()</code>. When the number of current entries is equal to 0, it does not trigger a new rollover and you can use this to reduce the ledger creation.</p><p>For more information about implementation details, see  <a href="https://github.com/apache/pulsar/pull/7111" target="_blank" rel="noopener noreferrer">PR-7116</a>.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="proxy">Proxy<a class="hash-link" href="#proxy" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_y2LR" id="add-rest-api-to-get-connection-and-topic-stats">Add REST API to get connection and topic stats<a class="hash-link" href="#add-rest-api-to-get-connection-and-topic-stats" title="Direct link to heading">​</a></h3><p>Previously, Pulsar proxy did not have useful stats to get internal information about the proxy. It is better to have internal-stats of proxy to get information, such as live connections, topic stats (with higher logging level), and so on. This PR adds REST API to get stats for connection and topics served by proxy.</p><p>For more information about implementation details, see <a href="https://github.com/apache/pulsar/pull/6473" target="_blank" rel="noopener noreferrer">PR-6473</a>.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="admin">Admin<a class="hash-link" href="#admin" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_y2LR" id="support-getting-a-message-by-message-id-in-pulsar-admin">Support getting a message by message ID in pulsar-admin<a class="hash-link" href="#support-getting-a-message-by-message-id-in-pulsar-admin" title="Direct link to heading">​</a></h3><p>This PR adds a new command <code>get-message-by-id</code> to the pulsar-admin. It allows users to check a single message by providing ledger ID and entry ID. </p><p>For more information about implementation details, see <a href="https://github.com/apache/pulsar/pull/6331" target="_blank" rel="noopener noreferrer">PR-6331</a>.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="support-deleting-subscriptions-forcefully">Support deleting subscriptions forcefully<a class="hash-link" href="#support-deleting-subscriptions-forcefully" title="Direct link to heading">​</a></h3><p>This PR adds the method <code>deleteForcefully</code> to support force deleting subscriptions. </p><p>For more information about implementation details, see <a href="https://github.com/apache/pulsar/pull/6383" target="_blank" rel="noopener noreferrer">PR-6383</a>.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="functions">Functions<a class="hash-link" href="#functions" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_y2LR" id="built-in-functions">Built-in functions<a class="hash-link" href="#built-in-functions" title="Direct link to heading">​</a></h3><p>This PR implements the possibility of creating built-in functions in the same way as adding built-in connectors.</p><p>For more information about implementation details, see <a href="https://github.com/apache/pulsar/pull/6895" target="_blank" rel="noopener noreferrer">PR-6895</a>.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="add-go-function-heartbeat-and-grpc-service-for-production-usage">Add Go Function heartbeat (and gRPC service) for production usage<a class="hash-link" href="#add-go-function-heartbeat-and-grpc-service-for-production-usage" title="Direct link to heading">​</a></h3><p>For more information about implementation details, see <a href="https://github.com/apache/pulsar/pull/6031" target="_blank" rel="noopener noreferrer">PR-6031</a>.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="add-custom-property-options-to-functions">Add custom property options to functions<a class="hash-link" href="#add-custom-property-options-to-functions" title="Direct link to heading">​</a></h3><p>This PR allows users to set custom system properties while submitting functions. This can be used to pass credentials via a system property.</p><p>For more information about implementation details, see <a href="https://github.com/apache/pulsar/pull/6348" target="_blank" rel="noopener noreferrer">PR-6348</a>.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="separate-tls-configurations-of-function-worker-and-broker">Separate TLS configurations of function worker and broker<a class="hash-link" href="#separate-tls-configurations-of-function-worker-and-broker" title="Direct link to heading">​</a></h3><p>For more information about implementation details, see <a href="https://github.com/apache/pulsar/pull/6602" target="_blank" rel="noopener noreferrer">PR-6602</a>.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="add-the-ability-to-build-consumers-in-functions-and-sources">Add the ability to build consumers in functions and sources<a class="hash-link" href="#add-the-ability-to-build-consumers-in-functions-and-sources" title="Direct link to heading">​</a></h3><p>Previously, function and source context give their writers an ability to create publishers but not consumers. This PR fixes this issue.</p><p>For more information about implementation details, see <a href="https://github.com/apache/pulsar/pull/6954" target="_blank" rel="noopener noreferrer">PR-6954</a>.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="pulsar-sql">Pulsar SQL<a class="hash-link" href="#pulsar-sql" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_y2LR" id="support-keyvalue-schema">Support KeyValue schema<a class="hash-link" href="#support-keyvalue-schema" title="Direct link to heading">​</a></h3><p>Previously, Pulsar SQL could not read the KeyValue schema data.</p><p>This PR adds KeyValue schema support for Pulsar SQL. It adds the prefix <code>key.</code> for the key field name and <code>value.</code> for the value field name.</p><p>For more information about implementation details, see <a href="https://github.com/apache/pulsar/pull/6325" target="_blank" rel="noopener noreferrer">PR-6325</a>.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="support-multiple-avro-schema-versions">Support multiple Avro schema versions<a class="hash-link" href="#support-multiple-avro-schema-versions" title="Direct link to heading">​</a></h3><p>Previously, if you have multiple Avro schema versions for a topic, using the Pulsar SQL to query data from this topic will introduce some problems. With this change, You can evolve the schema of the topic and keep transitive backward compatibility of all schemas of the topic if you want to query data from this topic. </p><p>For more information about implementation details, see <a href="https://github.com/apache/pulsar/pull/4847" target="_blank" rel="noopener noreferrer">PR-4847</a>.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="java-client">Java client<a class="hash-link" href="#java-client" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_y2LR" id="support-waiting-for-inflight-messages-while-closing-a-producer">Support waiting for inflight messages while closing a producer<a class="hash-link" href="#support-waiting-for-inflight-messages-while-closing-a-producer" title="Direct link to heading">​</a></h3><p>Previously, when you closed a producer, the pulsar-client immediately failed inflight messages even if it persisted successfully at the broker. Most of the time, users want to wait for those inflight messages rather than fail them. While the pulsar-client library did not provide a way to wait for inflight messages before closing the producer. This PR supports closing API with a flag where you can control waiting for inflight messages. With this change, you can close a producer by waiting for inflight messages and the pulsar-client does not fail those messages immediately.
Previously, when you closed a producer, the pulsar-client immediately failed inflight messages even if it persisted successfully at the broker. Most of the time, users want to wait for those inflight messages rather than fail them. While the pulsar-client library did not provide a way to wait for inflight messages before closing the producer. This PR supports closing API with a flag where you can control waiting for inflight messages. With this change, you can close a producer by waiting for inflight messages and the pulsar-client does not fail those messages immediately.</p><p>For more information about implementation details, see <a href="https://github.com/apache/pulsar/pull/6648" target="_blank" rel="noopener noreferrer">PR-6648</a>.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="support-loading-tls-certskey-dynamically-from-input-stream">Support loading TLS certs/key dynamically from input stream<a class="hash-link" href="#support-loading-tls-certskey-dynamically-from-input-stream" title="Direct link to heading">​</a></h3><p>Previously, the pulsar-client provided TLS authentication support and the default TLS provider <code>AuthenticationTls</code> expected file path of cert and key files. However, there were use cases where it was difficult for user applications to store certs/key files locally for TLS authentication. This PR adds stream support in <code>AuthenticationTls</code> to provide X509Certs and PrivateKey which also perform auto-refresh when streaming changes in a given provider.</p><p>For more information about implementation details, see <a href="https://github.com/apache/pulsar/pull/6760" target="_blank" rel="noopener noreferrer">PR-6760</a>.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="support-returning-sequence-id-when-throwing-an-exception-for-async-send-messages">Support returning sequence ID when throwing an exception for async send messages<a class="hash-link" href="#support-returning-sequence-id-when-throwing-an-exception-for-async-send-messages" title="Direct link to heading">​</a></h3><p>Previously, when sending messages asynchronously failed, an exception was thrown, but did not know which message was abnormal, and users did not know which messages needed to be retried. This PR makes changes supported on the client side. When throwing an exception, the sequenceId <code>org.apache.pulsar.client.api.PulsarClientException</code> is set.</p><p>For more information about implementation details, see <a href="https://github.com/apache/pulsar/pull/6825" target="_blank" rel="noopener noreferrer">PR-6825</a>.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="more-information">More information<a class="hash-link" href="#more-information" title="Direct link to heading">​</a></h2><ul><li>To download Apache Pulsar 2.6.0, click <a href="https://pulsar.apache.org/en/download/" target="_blank" rel="noopener noreferrer">here</a>.</li><li>For more information about Apache Pulsar 2.6.0, see <a href="https://pulsar.apache.org/release-notes/#2.6.0" target="_blank" rel="noopener noreferrer">2.6.0 release notes</a> and <a href="https://github.com/apache/pulsar/pulls?q=milestone%3A2.6.0+-label%3Arelease%2F2.5.2+-label%3Arelease%2F2.5.1+" target="_blank" rel="noopener noreferrer">2.6.0 PR list</a>.</li></ul><p>If you have any questions or suggestions, contact us with mailing lists or slack.</p><ul><li><a href="mailto:users@pulsar.apache.org" target="_blank" rel="noopener noreferrer">users@pulsar.apache.org</a></li><li><a href="mailto:dev@pulsar.apache.org" target="_blank" rel="noopener noreferrer">dev@pulsar.apache.org</a></li><li>Pulsar slack channel: <a href="https://apache-pulsar.slack.com/" target="_blank" rel="noopener noreferrer">https://apache-pulsar.slack.com/</a></li><li>Self-registration at <a href="https://apache-pulsar.herokuapp.com/" target="_blank" rel="noopener noreferrer">https://apache-pulsar.herokuapp.com/</a></li></ul><p>Looking forward to your contributions to <a href="https://github.com/apache/pulsar" target="_blank" rel="noopener noreferrer">Pulsar</a>.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/blog/2020/08/21/Apache-Pulsar-2-6-1"><div class="pagination-nav__sublabel">Newer Post</div><div class="pagination-nav__label">« <!-- -->Apache Pulsar 2.6.1</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/blog/2020/05/19/Apache-Pulsar-2-5-2"><div class="pagination-nav__sublabel">Older Post</div><div class="pagination-nav__label">Apache Pulsar 2.5.2<!-- --> »</div></a></div></nav></main><div class="col col--2"><div class="tableOfContents_vrFS thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#core-pulsar" class="table-of-contents__link toc-highlight">Core Pulsar</a><ul><li><a href="#pip-37-large-message-size-support" class="table-of-contents__link toc-highlight">PIP-37 Large message size support</a></li><li><a href="#pip-39-namespace-change-events-system-topic" class="table-of-contents__link toc-highlight">PIP-39 Namespace change events (system topic)</a></li><li><a href="#pip-45-pluggable-metadata-interface" class="table-of-contents__link toc-highlight">PIP-45 Pluggable metadata interface</a></li><li><a href="#pip-54-support-acknowledgment-at-the-batch-index-level" class="table-of-contents__link toc-highlight">PIP-54 Support acknowledgment at the batch index level</a></li><li><a href="#pip-58-support-consumers-setting-custom-message-retry-delay" class="table-of-contents__link toc-highlight">PIP-58 Support consumers setting custom message retry delay</a></li><li><a href="#pip-60-support-sni-routing-to-support-various-proxy-servers" class="table-of-contents__link toc-highlight">PIP-60 Support SNI routing to support various proxy servers</a></li><li><a href="#pip-61-advertise-multiple-addresses" class="table-of-contents__link toc-highlight">PIP-61 Advertise multiple addresses</a></li><li><a href="#pip-65-adapt-pulsar-io-sources-to-support-batchsources" class="table-of-contents__link toc-highlight">PIP-65 Adapt Pulsar IO sources to support <code>BatchSources</code></a></li><li><a href="#load-balancer-add-thresholdshedder-strategy-for-the-load-balancer" class="table-of-contents__link toc-highlight">Load balancer Add <code>ThresholdShedder</code> strategy for the load balancer</a></li><li><a href="#key-shared-add-consistent-hashing-in-the-key_shared-distribution" class="table-of-contents__link toc-highlight">Key Shared Add consistent hashing in the Key_Shared distribution</a></li><li><a href="#key-shared-fix-ordering-issue-in-keyshared-dispatcher-when-adding-consumers" class="table-of-contents__link toc-highlight">Key Shared Fix ordering issue in KeyShared dispatcher when adding consumers</a></li><li><a href="#key-shared-add-support-for-key-hash-range-reading" class="table-of-contents__link toc-highlight">Key Shared Add support for key hash range reading</a></li><li><a href="#use-pure-java-air-compressor-instead-of-jni-based-libraries" class="table-of-contents__link toc-highlight">Use pure-java Air-Compressor instead of JNI based libraries</a></li><li><a href="#support-multiple-pulsar-clusters-using-the-same-bookkeeper-cluster" class="table-of-contents__link toc-highlight">Support multiple Pulsar clusters using the same BookKeeper cluster</a></li><li><a href="#support-deleting-inactive-topics-when-subscriptions-are-caught-up" class="table-of-contents__link toc-highlight">Support deleting inactive topics when subscriptions are caught up</a></li><li><a href="#add-a-flag-to-skip-broker-shutdown-on-transient-oom" class="table-of-contents__link toc-highlight">Add a flag to skip broker shutdown on transient OOM</a></li><li><a href="#make-zookeeper-cache-expiry-time-configurable" class="table-of-contents__link toc-highlight">Make ZooKeeper cache expiry time configurable</a></li><li><a href="#optimize-consumer-fetch-messages-in-case-of-batch-message" class="table-of-contents__link toc-highlight">Optimize consumer fetch messages in case of batch message</a></li><li><a href="#introduce-precise-topic-publish-rate-limiting" class="table-of-contents__link toc-highlight">Introduce precise topic publish rate limiting</a></li><li><a href="#expose-check-delay-of-new-entries-in-brokerconf" class="table-of-contents__link toc-highlight">Expose check delay of new entries in <code>broker.conf</code></a></li><li><a href="#schema--supports-null-key-and-null-value-in-keyvalue-schema" class="table-of-contents__link toc-highlight">Schema  Supports <code>null</code> key and <code>null</code> value in KeyValue schema</a></li><li><a href="#support-triggering-ledger-rollover-when-maxledgerrollovertimeminutes-is-met" class="table-of-contents__link toc-highlight">Support triggering ledger rollover when <code>maxLedgerRolloverTimeMinutes</code> is met</a></li></ul></li><li><a href="#proxy" class="table-of-contents__link toc-highlight">Proxy</a><ul><li><a href="#add-rest-api-to-get-connection-and-topic-stats" class="table-of-contents__link toc-highlight">Add REST API to get connection and topic stats</a></li></ul></li><li><a href="#admin" class="table-of-contents__link toc-highlight">Admin</a><ul><li><a href="#support-getting-a-message-by-message-id-in-pulsar-admin" class="table-of-contents__link toc-highlight">Support getting a message by message ID in pulsar-admin</a></li><li><a href="#support-deleting-subscriptions-forcefully" class="table-of-contents__link toc-highlight">Support deleting subscriptions forcefully</a></li></ul></li><li><a href="#functions" class="table-of-contents__link toc-highlight">Functions</a><ul><li><a href="#built-in-functions" class="table-of-contents__link toc-highlight">Built-in functions</a></li><li><a href="#add-go-function-heartbeat-and-grpc-service-for-production-usage" class="table-of-contents__link toc-highlight">Add Go Function heartbeat (and gRPC service) for production usage</a></li><li><a href="#add-custom-property-options-to-functions" class="table-of-contents__link toc-highlight">Add custom property options to functions</a></li><li><a href="#separate-tls-configurations-of-function-worker-and-broker" class="table-of-contents__link toc-highlight">Separate TLS configurations of function worker and broker</a></li><li><a href="#add-the-ability-to-build-consumers-in-functions-and-sources" class="table-of-contents__link toc-highlight">Add the ability to build consumers in functions and sources</a></li></ul></li><li><a href="#pulsar-sql" class="table-of-contents__link toc-highlight">Pulsar SQL</a><ul><li><a href="#support-keyvalue-schema" class="table-of-contents__link toc-highlight">Support KeyValue schema</a></li><li><a href="#support-multiple-avro-schema-versions" class="table-of-contents__link toc-highlight">Support multiple Avro schema versions</a></li></ul></li><li><a href="#java-client" class="table-of-contents__link toc-highlight">Java client</a><ul><li><a href="#support-waiting-for-inflight-messages-while-closing-a-producer" class="table-of-contents__link toc-highlight">Support waiting for inflight messages while closing a producer</a></li><li><a href="#support-loading-tls-certskey-dynamically-from-input-stream" class="table-of-contents__link toc-highlight">Support loading TLS certs/key dynamically from input stream</a></li><li><a href="#support-returning-sequence-id-when-throwing-an-exception-for-async-send-messages" class="table-of-contents__link toc-highlight">Support returning sequence ID when throwing an exception for async send messages</a></li></ul></li><li><a href="#more-information" class="table-of-contents__link toc-highlight">More information</a></li></ul></div></div></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Inc.Copyright © 2021 The Apache Software Foundation. All Rights Reserved. Apache, Apache Pulsar and the Apache feather logo are trademarks of The Apache Software Foundation.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.64567627.js"></script>
<script src="/assets/js/main.7befe8d6.js"></script>
</body>
</html>