"use strict";(self.webpackChunkwebsite_next=self.webpackChunkwebsite_next||[]).push([[79964],{3905:function(e,t,a){a.d(t,{Zo:function(){return p},kt:function(){return k}});var r=a(67294);function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){n(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},l=Object.keys(e);for(r=0;r<l.length;r++)a=l[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)a=l[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var o=r.createContext({}),u=function(e){var t=r.useContext(o),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},p=function(e){var t=u(e.components);return r.createElement(o.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var a=e.components,n=e.mdxType,l=e.originalType,o=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),d=u(a),k=n,c=d["".concat(o,".").concat(k)]||d[k]||m[k]||l;return a?r.createElement(c,i(i({ref:t},p),{},{components:a})):r.createElement(c,i({ref:t},p))}));function k(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var l=a.length,i=new Array(l);i[0]=d;var s={};for(var o in t)hasOwnProperty.call(t,o)&&(s[o]=t[o]);s.originalType=e,s.mdxType="string"==typeof e?e:n,i[1]=s;for(var u=2;u<l;u++)i[u]=a[u];return r.createElement.apply(null,i)}return r.createElement.apply(null,a)}d.displayName="MDXCreateElement"},56411:function(e,t,a){a.r(t),a.d(t,{frontMatter:function(){return s},contentTitle:function(){return o},metadata:function(){return u},toc:function(){return p},default:function(){return d}});var r=a(87462),n=a(63366),l=(a(67294),a(3905)),i=["components"],s={id:"reference-metrics",title:"Pulsar Metrics",sidebar_label:"Pulsar Metrics",original_id:"reference-metrics"},o=void 0,u={unversionedId:"reference-metrics",id:"version-2.5.1/reference-metrics",isDocsHomePage:!1,title:"Pulsar Metrics",description:"Pulsar exposes metrics in Prometheus format that can be collected and used for monitoring the health of the cluster.",source:"@site/versioned_docs/version-2.5.1/reference-metrics.md",sourceDirName:".",slug:"/reference-metrics",permalink:"/docs/2.5.1/reference-metrics",editUrl:"https://github.com/apache/pulsar/edit/master/site2/website-next/versioned_docs/version-2.5.1/reference-metrics.md",tags:[],version:"2.5.1",frontMatter:{id:"reference-metrics",title:"Pulsar Metrics",sidebar_label:"Pulsar Metrics",original_id:"reference-metrics"},sidebar:"version-2.5.1/docsSidebar",previous:{title:"Pulsar configuration",permalink:"/docs/2.5.1/reference-configuration"}},p=[{value:"Overview",id:"overview",children:[],level:2},{value:"ZooKeeper",id:"zookeeper",children:[{value:"Server metrics",id:"server-metrics",children:[],level:3},{value:"Request metrics",id:"request-metrics",children:[],level:3}],level:2},{value:"BookKeeper",id:"bookkeeper",children:[{value:"Server metrics",id:"server-metrics-1",children:[],level:3},{value:"Journal metrics",id:"journal-metrics",children:[],level:3},{value:"Storage metrics",id:"storage-metrics",children:[],level:3}],level:2},{value:"Broker",id:"broker",children:[{value:"Namespace metrics",id:"namespace-metrics",children:[{value:"Replication metrics",id:"replication-metrics",children:[],level:4}],level:3},{value:"Topic metrics",id:"topic-metrics",children:[{value:"Replication metrics",id:"replication-metrics-1",children:[],level:4}],level:3},{value:"Subscription metrics",id:"subscription-metrics",children:[],level:3},{value:"Consumer metrics",id:"consumer-metrics",children:[],level:3},{value:"Jetty metrics",id:"jetty-metrics",children:[],level:3}],level:2},{value:"Monitor",id:"monitor",children:[],level:2}],m={toc:p};function d(e){var t=e.components,a=(0,n.Z)(e,i);return(0,l.kt)("wrapper",(0,r.Z)({},m,a,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("p",null,"Pulsar exposes metrics in Prometheus format that can be collected and used for monitoring the health of the cluster."),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"#zookeeper"},"ZooKeeper")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"#bookkeeper"},"BookKeeper")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"#broker"},"Broker"))),(0,l.kt)("h2",{id:"overview"},"Overview"),(0,l.kt)("p",null,"The metrics exposed by Pulsar are in Prometheus format. The types of metrics are:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://prometheus.io/docs/concepts/metric_types/#counter"},"Counter"),": a cumulative metric that represents a single monotonically increasing counter whose value can only increase or be reset to zero on restart."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://prometheus.io/docs/concepts/metric_types/#gauge"},"Gauge"),": a ",(0,l.kt)("em",{parentName:"li"},"gauge")," is a metric that represents a single numerical value that can arbitrarily go up and down."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://prometheus.io/docs/concepts/metric_types/#histogram"},"Histogram"),": a histogram samples observations (usually things like request durations or response sizes) and counts them in configurable buckets. The ",(0,l.kt)("inlineCode",{parentName:"li"},"_bucket")," suffix is the number of observations within a histogram bucket, configured with parameter ",(0,l.kt)("inlineCode",{parentName:"li"},'{le="<upper inclusive bound>"}'),". The ",(0,l.kt)("inlineCode",{parentName:"li"},"_count")," suffix is the number of observations, shown as a time series and behaves like a counter. The ",(0,l.kt)("inlineCode",{parentName:"li"},"_sum")," suffix is the sum of observed values, also shown as a time series and behaves like a counter. These suffixes are together denoted by ",(0,l.kt)("inlineCode",{parentName:"li"},"_*")," in this doc."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://prometheus.io/docs/concepts/metric_types/#summary"},"Summary"),": similar to a histogram, a summary samples observations (usually things like request durations and response sizes). While it also provides a total count of observations and a sum of all observed values, it calculates configurable quantiles over a sliding time window.")),(0,l.kt)("h2",{id:"zookeeper"},"ZooKeeper"),(0,l.kt)("p",null,'The ZooKeeper metrics are exposed under "/metrics" at port 8000. You can use a different port\nby configuring the ',(0,l.kt)("inlineCode",{parentName:"p"},"stats_server_port")," system property."),(0,l.kt)("h3",{id:"server-metrics"},"Server metrics"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Name"),(0,l.kt)("th",{parentName:"tr",align:null},"Type"),(0,l.kt)("th",{parentName:"tr",align:null},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"zookeeper_server_znode_count"),(0,l.kt)("td",{parentName:"tr",align:null},"Gauge"),(0,l.kt)("td",{parentName:"tr",align:null},"The number of z-nodes stored.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"zookeeper_server_data_size_bytes"),(0,l.kt)("td",{parentName:"tr",align:null},"Gauge"),(0,l.kt)("td",{parentName:"tr",align:null},"The total size of all of z-nodes stored.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"zookeeper_server_connections"),(0,l.kt)("td",{parentName:"tr",align:null},"Gauge"),(0,l.kt)("td",{parentName:"tr",align:null},"The number of currently opened connections.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"zookeeper_server_watches_count"),(0,l.kt)("td",{parentName:"tr",align:null},"Gauge"),(0,l.kt)("td",{parentName:"tr",align:null},"The number of watchers registered.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"zookeeper_server_ephemerals_count"),(0,l.kt)("td",{parentName:"tr",align:null},"Gauge"),(0,l.kt)("td",{parentName:"tr",align:null},"The number of ephemeral z-nodes.")))),(0,l.kt)("h3",{id:"request-metrics"},"Request metrics"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Name"),(0,l.kt)("th",{parentName:"tr",align:null},"Type"),(0,l.kt)("th",{parentName:"tr",align:null},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"zookeeper_server_requests"),(0,l.kt)("td",{parentName:"tr",align:null},"Counter"),(0,l.kt)("td",{parentName:"tr",align:null},"The total number of requests received by a particular server.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"zookeeper_server_requests_latency_ms"),(0,l.kt)("td",{parentName:"tr",align:null},"Summary"),(0,l.kt)("td",{parentName:"tr",align:null},"The requests latency calculated in milliseconds. ",(0,l.kt)("br",null)," Available labels: ",(0,l.kt)("em",{parentName:"td"},"type")," (write, read). ",(0,l.kt)("br",null)," ",(0,l.kt)("ul",null,(0,l.kt)("li",null,(0,l.kt)("em",{parentName:"td"},"write"),": the requests that write data to ZooKeeper."),(0,l.kt)("li",null,(0,l.kt)("em",{parentName:"td"},"read"),": the requests that read data from ZooKeeper.")))))),(0,l.kt)("h2",{id:"bookkeeper"},"BookKeeper"),(0,l.kt)("p",null,'The BookKeeper metrics are exposed under "/metrics" at port 8000. You can change the port by updating ',(0,l.kt)("inlineCode",{parentName:"p"},"prometheusStatsHttpPort"),"\nin ",(0,l.kt)("inlineCode",{parentName:"p"},"bookkeeper.conf")," configuration file."),(0,l.kt)("h3",{id:"server-metrics-1"},"Server metrics"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Name"),(0,l.kt)("th",{parentName:"tr",align:null},"Type"),(0,l.kt)("th",{parentName:"tr",align:null},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"bookie_SERVER_STATUS"),(0,l.kt)("td",{parentName:"tr",align:null},"Gauge"),(0,l.kt)("td",{parentName:"tr",align:null},"The server status for bookie server. ",(0,l.kt)("br",null),(0,l.kt)("ul",null,(0,l.kt)("li",null,"1: the bookie is running in writable mode."),(0,l.kt)("li",null,"0: the bookie is running in readonly mode.")))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"bookkeeper_server_ADD_ENTRY_count"),(0,l.kt)("td",{parentName:"tr",align:null},"Counter"),(0,l.kt)("td",{parentName:"tr",align:null},"The total number of ADD_ENTRY requests received at the bookie. The ",(0,l.kt)("inlineCode",{parentName:"td"},"success")," label is used to distinguish successes and failures.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"bookkeeper_server_READ_ENTRY_count"),(0,l.kt)("td",{parentName:"tr",align:null},"Counter"),(0,l.kt)("td",{parentName:"tr",align:null},"The total number of READ_ENTRY requests received at the bookie. The ",(0,l.kt)("inlineCode",{parentName:"td"},"success")," label is used to distinguish successes and failures.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"bookie_WRITE_BYTES"),(0,l.kt)("td",{parentName:"tr",align:null},"Counter"),(0,l.kt)("td",{parentName:"tr",align:null},"The total number of bytes written to the bookie.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"bookie_READ_BYTES"),(0,l.kt)("td",{parentName:"tr",align:null},"Counter"),(0,l.kt)("td",{parentName:"tr",align:null},"The total number of bytes read from the bookie.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"bookkeeper_server_ADD_ENTRY_REQUEST"),(0,l.kt)("td",{parentName:"tr",align:null},"Summary"),(0,l.kt)("td",{parentName:"tr",align:null},"The summary of request latency of ADD_ENTRY requests at the bookie. The ",(0,l.kt)("inlineCode",{parentName:"td"},"success")," label is used to distinguish successes and failures.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"bookkeeper_server_READ_ENTRY_REQUEST"),(0,l.kt)("td",{parentName:"tr",align:null},"Summary"),(0,l.kt)("td",{parentName:"tr",align:null},"The summary of request latency of READ_ENTRY requests at the bookie. The ",(0,l.kt)("inlineCode",{parentName:"td"},"success")," label is used to distinguish successes and failures.")))),(0,l.kt)("h3",{id:"journal-metrics"},"Journal metrics"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Name"),(0,l.kt)("th",{parentName:"tr",align:null},"Type"),(0,l.kt)("th",{parentName:"tr",align:null},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"bookie_journal_JOURNAL_SYNC_count"),(0,l.kt)("td",{parentName:"tr",align:null},"Counter"),(0,l.kt)("td",{parentName:"tr",align:null},"The total number of journal fsync operations happening at the bookie. The ",(0,l.kt)("inlineCode",{parentName:"td"},"success")," label is used to distinguish successes and failures.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"bookie_journal_JOURNAL_QUEUE_SIZE"),(0,l.kt)("td",{parentName:"tr",align:null},"Gauge"),(0,l.kt)("td",{parentName:"tr",align:null},"The total number of requests pending in the journal queue.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"bookie_journal_JOURNAL_FORCE_WRITE_QUEUE_SIZE"),(0,l.kt)("td",{parentName:"tr",align:null},"Gauge"),(0,l.kt)("td",{parentName:"tr",align:null},"The total number of force write (fsync) requests pending in the force-write queue.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"bookie_journal_JOURNAL_CB_QUEUE_SIZE"),(0,l.kt)("td",{parentName:"tr",align:null},"Gauge"),(0,l.kt)("td",{parentName:"tr",align:null},"The total number of callbacks pending in the callback queue.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"bookie_journal_JOURNAL_ADD_ENTRY"),(0,l.kt)("td",{parentName:"tr",align:null},"Summary"),(0,l.kt)("td",{parentName:"tr",align:null},"The summary of request latency of adding entries to the journal.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"bookie_journal_JOURNAL_SYNC"),(0,l.kt)("td",{parentName:"tr",align:null},"Summary"),(0,l.kt)("td",{parentName:"tr",align:null},"The summary of fsync latency of syncing data to the journal disk.")))),(0,l.kt)("h3",{id:"storage-metrics"},"Storage metrics"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Name"),(0,l.kt)("th",{parentName:"tr",align:null},"Type"),(0,l.kt)("th",{parentName:"tr",align:null},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"bookie_ledgers_count"),(0,l.kt)("td",{parentName:"tr",align:null},"Gauge"),(0,l.kt)("td",{parentName:"tr",align:null},"The total number of ledgers stored in the bookie.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"bookie_entries_count"),(0,l.kt)("td",{parentName:"tr",align:null},"Gauge"),(0,l.kt)("td",{parentName:"tr",align:null},"The total number of entries stored in the bookie.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"bookie_write_cache_size"),(0,l.kt)("td",{parentName:"tr",align:null},"Gauge"),(0,l.kt)("td",{parentName:"tr",align:null},"The bookie write cache size (in bytes).")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"bookie_read_cache_size"),(0,l.kt)("td",{parentName:"tr",align:null},"Gauge"),(0,l.kt)("td",{parentName:"tr",align:null},"The bookie read cache size (in bytes).")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"bookie_DELETED_LEDGER_COUNT"),(0,l.kt)("td",{parentName:"tr",align:null},"Counter"),(0,l.kt)("td",{parentName:"tr",align:null},"The total number of ledgers deleted since the bookie has started.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"bookie_ledger_writable_dirs"),(0,l.kt)("td",{parentName:"tr",align:null},"Gauge"),(0,l.kt)("td",{parentName:"tr",align:null},"The number of writable directories in the bookie.")))),(0,l.kt)("h2",{id:"broker"},"Broker"),(0,l.kt)("p",null,'The broker metrics are exposed under "/metrics" at port 8080. You can change the port by updating ',(0,l.kt)("inlineCode",{parentName:"p"},"webServicePort")," to a different port\nin ",(0,l.kt)("inlineCode",{parentName:"p"},"broker.conf")," configuration file."),(0,l.kt)("p",null,"All the metrics exposed by a broker are labelled with ",(0,l.kt)("inlineCode",{parentName:"p"},"cluster=${pulsar_cluster}"),". The value of ",(0,l.kt)("inlineCode",{parentName:"p"},"${pulsar_cluster}")," is the pulsar cluster\nname you configured in ",(0,l.kt)("inlineCode",{parentName:"p"},"broker.conf"),"."),(0,l.kt)("p",null,"Broker has the following kinds of metrics:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"#namespace-metrics"},"Namespace metrics"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"#replication-metrics"},"Replication metrics")))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"#topic-metrics"},"Topic metrics"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"#replication-metrics-1"},"Replication metrics")))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"#subscription-metrics"},"Subscription metrics")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"#consumer-metrics"},"Consumer metrics")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"#jetty-metrics"},"Jetty metrics"))),(0,l.kt)("h3",{id:"namespace-metrics"},"Namespace metrics"),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"Namespace metrics are only exposed when ",(0,l.kt)("inlineCode",{parentName:"p"},"exposeTopicLevelMetricsInPrometheus")," is set to ",(0,l.kt)("inlineCode",{parentName:"p"},"false"),".")),(0,l.kt)("p",null,"All the namespace metrics are labelled with the following labels:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("em",{parentName:"li"},"cluster"),": ",(0,l.kt)("inlineCode",{parentName:"li"},"cluster=${pulsar_cluster}"),". ",(0,l.kt)("inlineCode",{parentName:"li"},"${pulsar_cluster}")," is the cluster name that you configured in ",(0,l.kt)("inlineCode",{parentName:"li"},"broker.conf"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("em",{parentName:"li"},"namespace"),": ",(0,l.kt)("inlineCode",{parentName:"li"},"namespace=${pulsar_namespace}"),". ",(0,l.kt)("inlineCode",{parentName:"li"},"${pulsar_namespace}")," is the namespace name.")),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Name"),(0,l.kt)("th",{parentName:"tr",align:null},"Type"),(0,l.kt)("th",{parentName:"tr",align:null},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"pulsar_topics_count"),(0,l.kt)("td",{parentName:"tr",align:null},"Gauge"),(0,l.kt)("td",{parentName:"tr",align:null},"The number of Pulsar topics of the namespace owned by this broker.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"pulsar_subscriptions_count"),(0,l.kt)("td",{parentName:"tr",align:null},"Gauge"),(0,l.kt)("td",{parentName:"tr",align:null},"The number of Pulsar subscriptions of the namespace served by this broker.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"pulsar_producers_count"),(0,l.kt)("td",{parentName:"tr",align:null},"Gauge"),(0,l.kt)("td",{parentName:"tr",align:null},"The number of active producers of the namespace connected to this broker.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"pulsar_consumers_count"),(0,l.kt)("td",{parentName:"tr",align:null},"Gauge"),(0,l.kt)("td",{parentName:"tr",align:null},"The number of active consumers of the namespace connected to this broker.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"pulsar_rate_in"),(0,l.kt)("td",{parentName:"tr",align:null},"Gauge"),(0,l.kt)("td",{parentName:"tr",align:null},"The total message rate of the namespace coming into this broker (messages/second).")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"pulsar_rate_out"),(0,l.kt)("td",{parentName:"tr",align:null},"Gauge"),(0,l.kt)("td",{parentName:"tr",align:null},"The total message rate of the namespace going out from this broker (messages/second).")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"pulsar_throughput_in"),(0,l.kt)("td",{parentName:"tr",align:null},"Gauge"),(0,l.kt)("td",{parentName:"tr",align:null},"The total throughput of the namespace coming into this broker (bytes/second).")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"pulsar_throughput_out"),(0,l.kt)("td",{parentName:"tr",align:null},"Gauge"),(0,l.kt)("td",{parentName:"tr",align:null},"The total throughput of the namespace going out from this broker (bytes/second).")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"pulsar_storage_size"),(0,l.kt)("td",{parentName:"tr",align:null},"Gauge"),(0,l.kt)("td",{parentName:"tr",align:null},"The total storage size of the topics in this namespace owned by this broker (bytes).")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"pulsar_storage_backlog_size"),(0,l.kt)("td",{parentName:"tr",align:null},"Gauge"),(0,l.kt)("td",{parentName:"tr",align:null},"The total backlog size of the topics of this namespace owned by this broker (messages).")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"pulsar_storage_offloaded_size"),(0,l.kt)("td",{parentName:"tr",align:null},"Gauge"),(0,l.kt)("td",{parentName:"tr",align:null},"The total amount of the data in this namespace offloaded to the tiered storage (bytes).")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"pulsar_storage_write_rate"),(0,l.kt)("td",{parentName:"tr",align:null},"Gauge"),(0,l.kt)("td",{parentName:"tr",align:null},"The total message batches (entries) written to the storage for this namespace (message batches / second).")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"pulsar_storage_read_rate"),(0,l.kt)("td",{parentName:"tr",align:null},"Gauge"),(0,l.kt)("td",{parentName:"tr",align:null},"The total message batches (entries) read from the storage for this namespace (message batches / second).")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"pulsar_subscription_delayed"),(0,l.kt)("td",{parentName:"tr",align:null},"Gauge"),(0,l.kt)("td",{parentName:"tr",align:null},"The total message batches (entries) are delayed for dispatching.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"pulsar",(0,l.kt)("em",{parentName:"td"},"storage_write_latency_le"),"*"),(0,l.kt)("td",{parentName:"tr",align:null},"Histogram"),(0,l.kt)("td",{parentName:"tr",align:null},"The entry rate of a namespace that the storage write latency is smaller with a given threshold.",(0,l.kt)("br",null)," Available thresholds: ",(0,l.kt)("br",null),(0,l.kt)("ul",null,(0,l.kt)("li",null,"pulsar_storage_write_latency_le_0_5: <= 0.5ms "),(0,l.kt)("li",null,"pulsar_storage_write_latency_le_1: <= 1ms"),(0,l.kt)("li",null,"pulsar_storage_write_latency_le_5: <= 5ms"),(0,l.kt)("li",null,"pulsar_storage_write_latency_le_10: <= 10ms"),(0,l.kt)("li",null,"pulsar_storage_write_latency_le_20: <= 20ms"),(0,l.kt)("li",null,"pulsar_storage_write_latency_le_50: <= 50ms"),(0,l.kt)("li",null,"pulsar_storage_write_latency_le_100: <= 100ms"),(0,l.kt)("li",null,"pulsar_storage_write_latency_le_200: <= 200ms"),(0,l.kt)("li",null,"pulsar_storage_write_latency_le_1000: <= 1s"),(0,l.kt)("li",null,"pulsar_storage_write_latency_le_overflow: > 1s")))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"pulsar",(0,l.kt)("em",{parentName:"td"},"entry_size_le"),"*"),(0,l.kt)("td",{parentName:"tr",align:null},"Histogram"),(0,l.kt)("td",{parentName:"tr",align:null},"The entry rate of a namespace that the entry size is smaller with a given threshold.",(0,l.kt)("br",null)," Available thresholds: ",(0,l.kt)("br",null),(0,l.kt)("ul",null,(0,l.kt)("li",null,"pulsar_entry_size_le_128: <= 128 bytes "),(0,l.kt)("li",null,"pulsar_entry_size_le_512: <= 512 bytes"),(0,l.kt)("li",null,"pulsar_entry_size_le_1_kb: <= 1 KB"),(0,l.kt)("li",null,"pulsar_entry_size_le_2_kb: <= 2 KB"),(0,l.kt)("li",null,"pulsar_entry_size_le_4_kb: <= 4 KB"),(0,l.kt)("li",null,"pulsar_entry_size_le_16_kb: <= 16 KB"),(0,l.kt)("li",null,"pulsar_entry_size_le_100_kb: <= 100 KB"),(0,l.kt)("li",null,"pulsar_entry_size_le_1_mb: <= 1 MB"),(0,l.kt)("li",null,"pulsar_entry_size_le_overflow: > 1 MB")))))),(0,l.kt)("h4",{id:"replication-metrics"},"Replication metrics"),(0,l.kt)("p",null,"If a namespace is configured to be replicated between multiple Pulsar clusters, the corresponding replication metrics will also be exposed when ",(0,l.kt)("inlineCode",{parentName:"p"},"replicationMetricsEnabled")," is enabled."),(0,l.kt)("p",null,"All the replication metrics will also be labelled with ",(0,l.kt)("inlineCode",{parentName:"p"},"remoteCluster=${pulsar_remote_cluster}"),"."),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Name"),(0,l.kt)("th",{parentName:"tr",align:null},"Type"),(0,l.kt)("th",{parentName:"tr",align:null},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"pulsar_replication_rate_in"),(0,l.kt)("td",{parentName:"tr",align:null},"Gauge"),(0,l.kt)("td",{parentName:"tr",align:null},"The total message rate of the namespace replicating from remote cluster (messages/second).")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"pulsar_replication_rate_out"),(0,l.kt)("td",{parentName:"tr",align:null},"Gauge"),(0,l.kt)("td",{parentName:"tr",align:null},"The total message rate of the namespace replicating to remote cluster (messages/second).")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"pulsar_replication_throughput_in"),(0,l.kt)("td",{parentName:"tr",align:null},"Gauge"),(0,l.kt)("td",{parentName:"tr",align:null},"The total throughput of the namespace replicating from remote cluster (bytes/second).")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"pulsar_replication_throughput_out"),(0,l.kt)("td",{parentName:"tr",align:null},"Gauge"),(0,l.kt)("td",{parentName:"tr",align:null},"The total throughput of the namespace replicating to remote cluster (bytes/second).")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"pulsar_replication_backlog"),(0,l.kt)("td",{parentName:"tr",align:null},"Gauge"),(0,l.kt)("td",{parentName:"tr",align:null},"The total backlog of the namespace replicating to remote cluster (messages).")))),(0,l.kt)("h3",{id:"topic-metrics"},"Topic metrics"),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"Topic metrics are only exposed when ",(0,l.kt)("inlineCode",{parentName:"p"},"exposeTopicLevelMetricsInPrometheus")," is set to true.")),(0,l.kt)("p",null,"All the topic metrics are labelled with the following labels:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("em",{parentName:"li"},"cluster"),": ",(0,l.kt)("inlineCode",{parentName:"li"},"cluster=${pulsar_cluster}"),". ",(0,l.kt)("inlineCode",{parentName:"li"},"${pulsar_cluster}")," is the cluster name that you configured in ",(0,l.kt)("inlineCode",{parentName:"li"},"broker.conf"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("em",{parentName:"li"},"namespace"),": ",(0,l.kt)("inlineCode",{parentName:"li"},"namespace=${pulsar_namespace}"),". ",(0,l.kt)("inlineCode",{parentName:"li"},"${pulsar_namespace}")," is the namespace name."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("em",{parentName:"li"},"topic"),": ",(0,l.kt)("inlineCode",{parentName:"li"},"topic=${pulsar_topic}"),". ",(0,l.kt)("inlineCode",{parentName:"li"},"${pulsar_topic}")," is the topic name.")),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Name"),(0,l.kt)("th",{parentName:"tr",align:null},"Type"),(0,l.kt)("th",{parentName:"tr",align:null},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"pulsar_subscriptions_count"),(0,l.kt)("td",{parentName:"tr",align:null},"Gauge"),(0,l.kt)("td",{parentName:"tr",align:null},"The number of Pulsar subscriptions of the topic served by this broker.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"pulsar_producers_count"),(0,l.kt)("td",{parentName:"tr",align:null},"Gauge"),(0,l.kt)("td",{parentName:"tr",align:null},"The number of active producers of the topic connected to this broker.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"pulsar_consumers_count"),(0,l.kt)("td",{parentName:"tr",align:null},"Gauge"),(0,l.kt)("td",{parentName:"tr",align:null},"The number of active consumers of the topic connected to this broker.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"pulsar_rate_in"),(0,l.kt)("td",{parentName:"tr",align:null},"Gauge"),(0,l.kt)("td",{parentName:"tr",align:null},"The total message rate of the topic coming into this broker (messages/second).")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"pulsar_rate_out"),(0,l.kt)("td",{parentName:"tr",align:null},"Gauge"),(0,l.kt)("td",{parentName:"tr",align:null},"The total message rate of the topic going out from this broker (messages/second).")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"pulsar_throughput_in"),(0,l.kt)("td",{parentName:"tr",align:null},"Gauge"),(0,l.kt)("td",{parentName:"tr",align:null},"The total throughput of the topic coming into this broker (bytes/second).")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"pulsar_throughput_out"),(0,l.kt)("td",{parentName:"tr",align:null},"Gauge"),(0,l.kt)("td",{parentName:"tr",align:null},"The total throughput of the topic going out from this broker (bytes/second).")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"pulsar_storage_size"),(0,l.kt)("td",{parentName:"tr",align:null},"Gauge"),(0,l.kt)("td",{parentName:"tr",align:null},"The total storage size of the topics in this topic owned by this broker (bytes).")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"pulsar_storage_backlog_size"),(0,l.kt)("td",{parentName:"tr",align:null},"Gauge"),(0,l.kt)("td",{parentName:"tr",align:null},"The total backlog size of the topics of this topic owned by this broker (messages).")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"pulsar_storage_offloaded_size"),(0,l.kt)("td",{parentName:"tr",align:null},"Gauge"),(0,l.kt)("td",{parentName:"tr",align:null},"The total amount of the data in this topic offloaded to the tiered storage (bytes).")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"pulsar_storage_backlog_quota_limit"),(0,l.kt)("td",{parentName:"tr",align:null},"Gauge"),(0,l.kt)("td",{parentName:"tr",align:null},"The total amount of the data in this topic that limit the backlog quota (bytes).")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"pulsar_storage_write_rate"),(0,l.kt)("td",{parentName:"tr",align:null},"Gauge"),(0,l.kt)("td",{parentName:"tr",align:null},"The total message batches (entries) written to the storage for this topic (message batches / second).")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"pulsar_storage_read_rate"),(0,l.kt)("td",{parentName:"tr",align:null},"Gauge"),(0,l.kt)("td",{parentName:"tr",align:null},"The total message batches (entries) read from the storage for this topic (message batches / second).")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"pulsar_subscription_delayed"),(0,l.kt)("td",{parentName:"tr",align:null},"Gauge"),(0,l.kt)("td",{parentName:"tr",align:null},"The total message batches (entries) are delayed for dispatching.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"pulsar",(0,l.kt)("em",{parentName:"td"},"storage_write_latency_le"),"*"),(0,l.kt)("td",{parentName:"tr",align:null},"Histogram"),(0,l.kt)("td",{parentName:"tr",align:null},"The entry rate of a topic that the storage write latency is smaller with a given threshold.",(0,l.kt)("br",null)," Available thresholds: ",(0,l.kt)("br",null),(0,l.kt)("ul",null,(0,l.kt)("li",null,"pulsar_storage_write_latency_le_0_5: <= 0.5ms "),(0,l.kt)("li",null,"pulsar_storage_write_latency_le_1: <= 1ms"),(0,l.kt)("li",null,"pulsar_storage_write_latency_le_5: <= 5ms"),(0,l.kt)("li",null,"pulsar_storage_write_latency_le_10: <= 10ms"),(0,l.kt)("li",null,"pulsar_storage_write_latency_le_20: <= 20ms"),(0,l.kt)("li",null,"pulsar_storage_write_latency_le_50: <= 50ms"),(0,l.kt)("li",null,"pulsar_storage_write_latency_le_100: <= 100ms"),(0,l.kt)("li",null,"pulsar_storage_write_latency_le_200: <= 200ms"),(0,l.kt)("li",null,"pulsar_storage_write_latency_le_1000: <= 1s"),(0,l.kt)("li",null,"pulsar_storage_write_latency_le_overflow: > 1s")))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"pulsar",(0,l.kt)("em",{parentName:"td"},"entry_size_le"),"*"),(0,l.kt)("td",{parentName:"tr",align:null},"Histogram"),(0,l.kt)("td",{parentName:"tr",align:null},"The entry rate of a topic that the entry size is smaller with a given threshold.",(0,l.kt)("br",null)," Available thresholds: ",(0,l.kt)("br",null),(0,l.kt)("ul",null,(0,l.kt)("li",null,"pulsar_entry_size_le_128: <= 128 bytes "),(0,l.kt)("li",null,"pulsar_entry_size_le_512: <= 512 bytes"),(0,l.kt)("li",null,"pulsar_entry_size_le_1_kb: <= 1 KB"),(0,l.kt)("li",null,"pulsar_entry_size_le_2_kb: <= 2 KB"),(0,l.kt)("li",null,"pulsar_entry_size_le_4_kb: <= 4 KB"),(0,l.kt)("li",null,"pulsar_entry_size_le_16_kb: <= 16 KB"),(0,l.kt)("li",null,"pulsar_entry_size_le_100_kb: <= 100 KB"),(0,l.kt)("li",null,"pulsar_entry_size_le_1_mb: <= 1 MB"),(0,l.kt)("li",null,"pulsar_entry_size_le_overflow: > 1 MB")))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"pulsar_in_bytes_total"),(0,l.kt)("td",{parentName:"tr",align:null},"Counter"),(0,l.kt)("td",{parentName:"tr",align:null},"The total number of bytes received for this topic")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"pulsar_in_messages_total"),(0,l.kt)("td",{parentName:"tr",align:null},"Counter"),(0,l.kt)("td",{parentName:"tr",align:null},"The total number of messages received for this topic")))),(0,l.kt)("h4",{id:"replication-metrics-1"},"Replication metrics"),(0,l.kt)("p",null,"If a namespace that a topic belongs to is configured to be replicated between multiple Pulsar clusters, the corresponding replication metrics will also be exposed when ",(0,l.kt)("inlineCode",{parentName:"p"},"replicationMetricsEnabled")," is enabled."),(0,l.kt)("p",null,"All the replication metrics will also be labelled with ",(0,l.kt)("inlineCode",{parentName:"p"},"remoteCluster=${pulsar_remote_cluster}"),"."),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Name"),(0,l.kt)("th",{parentName:"tr",align:null},"Type"),(0,l.kt)("th",{parentName:"tr",align:null},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"pulsar_replication_rate_in"),(0,l.kt)("td",{parentName:"tr",align:null},"Gauge"),(0,l.kt)("td",{parentName:"tr",align:null},"The total message rate of the topic replicating from remote cluster (messages/second).")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"pulsar_replication_rate_out"),(0,l.kt)("td",{parentName:"tr",align:null},"Gauge"),(0,l.kt)("td",{parentName:"tr",align:null},"The total message rate of the topic replicating to remote cluster (messages/second).")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"pulsar_replication_throughput_in"),(0,l.kt)("td",{parentName:"tr",align:null},"Gauge"),(0,l.kt)("td",{parentName:"tr",align:null},"The total throughput of the topic replicating from remote cluster (bytes/second).")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"pulsar_replication_throughput_out"),(0,l.kt)("td",{parentName:"tr",align:null},"Gauge"),(0,l.kt)("td",{parentName:"tr",align:null},"The total throughput of the topic replicating to remote cluster (bytes/second).")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"pulsar_replication_backlog"),(0,l.kt)("td",{parentName:"tr",align:null},"Gauge"),(0,l.kt)("td",{parentName:"tr",align:null},"The total backlog of the topic replicating to remote cluster (messages).")))),(0,l.kt)("h3",{id:"subscription-metrics"},"Subscription metrics"),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"Subscription metrics are only exposed when ",(0,l.kt)("inlineCode",{parentName:"p"},"exposeTopicLevelMetricsInPrometheus")," is set to true.")),(0,l.kt)("p",null,"All the subscription metrics are labelled with the following labels:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("em",{parentName:"li"},"cluster"),": ",(0,l.kt)("inlineCode",{parentName:"li"},"cluster=${pulsar_cluster}"),". ",(0,l.kt)("inlineCode",{parentName:"li"},"${pulsar_cluster}")," is the cluster name that you configured in ",(0,l.kt)("inlineCode",{parentName:"li"},"broker.conf"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("em",{parentName:"li"},"namespace"),": ",(0,l.kt)("inlineCode",{parentName:"li"},"namespace=${pulsar_namespace}"),". ",(0,l.kt)("inlineCode",{parentName:"li"},"${pulsar_namespace}")," is the namespace name."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("em",{parentName:"li"},"topic"),": ",(0,l.kt)("inlineCode",{parentName:"li"},"topic=${pulsar_topic}"),". ",(0,l.kt)("inlineCode",{parentName:"li"},"${pulsar_topic}")," is the topic name."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("em",{parentName:"li"},"subscription"),": ",(0,l.kt)("inlineCode",{parentName:"li"},"subscription=${subscription}"),". ",(0,l.kt)("inlineCode",{parentName:"li"},"${subscription}")," is the topic subscription name.")),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Name"),(0,l.kt)("th",{parentName:"tr",align:null},"Type"),(0,l.kt)("th",{parentName:"tr",align:null},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"pulsar_subscription_back_log"),(0,l.kt)("td",{parentName:"tr",align:null},"Gauge"),(0,l.kt)("td",{parentName:"tr",align:null},"The total backlog of a subscription (messages).")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"pulsar_subscription_delayed"),(0,l.kt)("td",{parentName:"tr",align:null},"Gauge"),(0,l.kt)("td",{parentName:"tr",align:null},"The total number of messages are delayed to be dispatched for a subscription (messages).")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"pulsar_subscription_msg_rate_redeliver"),(0,l.kt)("td",{parentName:"tr",align:null},"Gauge"),(0,l.kt)("td",{parentName:"tr",align:null},"The total message rate for message being redelivered (messages/second).")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"pulsar_subscription_unacked_messages"),(0,l.kt)("td",{parentName:"tr",align:null},"Gauge"),(0,l.kt)("td",{parentName:"tr",align:null},"The total number of unacknowledged messages of a subscription (messages).")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"pulsar_subscription_blocked_on_unacked_messages"),(0,l.kt)("td",{parentName:"tr",align:null},"Gauge"),(0,l.kt)("td",{parentName:"tr",align:null},"Indicate whether a subscription is blocked on unacknowledged messages or not. ",(0,l.kt)("br",null)," ",(0,l.kt)("ul",null,(0,l.kt)("li",null,"1 means the subscription is blocked on waiting unacknowledged messages to be acked."),(0,l.kt)("li",null,"0 means the subscription is not blocked on waiting unacknowledged messages to be acked.")))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"pulsar_subscription_msg_rate_out"),(0,l.kt)("td",{parentName:"tr",align:null},"Gauge"),(0,l.kt)("td",{parentName:"tr",align:null},"The total message dispatch rate for a subscription (messages/second).")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"pulsar_subscription_msg_throughput_out"),(0,l.kt)("td",{parentName:"tr",align:null},"Gauge"),(0,l.kt)("td",{parentName:"tr",align:null},"The total message dispatch throughput for a subscription (bytes/second).")))),(0,l.kt)("h3",{id:"consumer-metrics"},"Consumer metrics"),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"Consumer metrics are only exposed when both ",(0,l.kt)("inlineCode",{parentName:"p"},"exposeTopicLevelMetricsInPrometheus")," and ",(0,l.kt)("inlineCode",{parentName:"p"},"exposeConsumerLevelMetricsInPrometheus"),"\nare set to true.")),(0,l.kt)("p",null,"All the consumer metrics are labelled with the following labels:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("em",{parentName:"li"},"cluster"),": ",(0,l.kt)("inlineCode",{parentName:"li"},"cluster=${pulsar_cluster}"),". ",(0,l.kt)("inlineCode",{parentName:"li"},"${pulsar_cluster}")," is the cluster name that you configured in ",(0,l.kt)("inlineCode",{parentName:"li"},"broker.conf"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("em",{parentName:"li"},"namespace"),": ",(0,l.kt)("inlineCode",{parentName:"li"},"namespace=${pulsar_namespace}"),". ",(0,l.kt)("inlineCode",{parentName:"li"},"${pulsar_namespace}")," is the namespace name."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("em",{parentName:"li"},"topic"),": ",(0,l.kt)("inlineCode",{parentName:"li"},"topic=${pulsar_topic}"),". ",(0,l.kt)("inlineCode",{parentName:"li"},"${pulsar_topic}")," is the topic name."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("em",{parentName:"li"},"subscription"),": ",(0,l.kt)("inlineCode",{parentName:"li"},"subscription=${subscription}"),". ",(0,l.kt)("inlineCode",{parentName:"li"},"${subscription}")," is the topic subscription name."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("em",{parentName:"li"},"consumer_name"),": ",(0,l.kt)("inlineCode",{parentName:"li"},"consumer_name=${consumer_name}"),". ",(0,l.kt)("inlineCode",{parentName:"li"},"${consumer_name}")," is the topic consumer name."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("em",{parentName:"li"},"consumer_id"),": ",(0,l.kt)("inlineCode",{parentName:"li"},"consumer_id=${consumer_id}"),". ",(0,l.kt)("inlineCode",{parentName:"li"},"${consumer_id}")," is the topic consumer id.")),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Name"),(0,l.kt)("th",{parentName:"tr",align:null},"Type"),(0,l.kt)("th",{parentName:"tr",align:null},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"pulsar_consumer_msg_rate_redeliver"),(0,l.kt)("td",{parentName:"tr",align:null},"Gauge"),(0,l.kt)("td",{parentName:"tr",align:null},"The total message rate for message being redelivered (messages/second).")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"pulsar_consumer_unacked_messages"),(0,l.kt)("td",{parentName:"tr",align:null},"Gauge"),(0,l.kt)("td",{parentName:"tr",align:null},"The total number of unacknowledged messages of a consumer (messages).")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"pulsar_consumer_blocked_on_unacked_messages"),(0,l.kt)("td",{parentName:"tr",align:null},"Gauge"),(0,l.kt)("td",{parentName:"tr",align:null},"Indicate whether a consumer is blocked on unacknowledged messages or not. ",(0,l.kt)("br",null)," ",(0,l.kt)("ul",null,(0,l.kt)("li",null,"1 means the consumer is blocked on waiting unacknowledged messages to be acked."),(0,l.kt)("li",null,"0 means the consumer is not blocked on waiting unacknowledged messages to be acked.")))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"pulsar_consumer_msg_rate_out"),(0,l.kt)("td",{parentName:"tr",align:null},"Gauge"),(0,l.kt)("td",{parentName:"tr",align:null},"The total message dispatch rate for a consumer (messages/second).")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"pulsar_consumer_msg_throughput_out"),(0,l.kt)("td",{parentName:"tr",align:null},"Gauge"),(0,l.kt)("td",{parentName:"tr",align:null},"The total message dispatch throughput for a consumer (bytes/second).")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"pulsar_consumer_available_permits"),(0,l.kt)("td",{parentName:"tr",align:null},"Gauge"),(0,l.kt)("td",{parentName:"tr",align:null},"The available permits for for a consumer.")))),(0,l.kt)("h3",{id:"jetty-metrics"},"Jetty metrics"),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"For a functions-worker running separately from brokers, its Jetty metrics are only exposed when ",(0,l.kt)("inlineCode",{parentName:"p"},"includeStandardPrometheusMetrics")," is set to ",(0,l.kt)("inlineCode",{parentName:"p"},"true"),".")),(0,l.kt)("p",null,"All the jetty metrics are labelled with the following labels:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("em",{parentName:"li"},"cluster"),": ",(0,l.kt)("inlineCode",{parentName:"li"},"cluster=${pulsar_cluster}"),". ",(0,l.kt)("inlineCode",{parentName:"li"},"${pulsar_cluster}")," is the cluster name that you have configured in the ",(0,l.kt)("inlineCode",{parentName:"li"},"broker.conf")," file.")),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Name"),(0,l.kt)("th",{parentName:"tr",align:null},"Type"),(0,l.kt)("th",{parentName:"tr",align:null},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"jetty_requests_total"),(0,l.kt)("td",{parentName:"tr",align:null},"Counter"),(0,l.kt)("td",{parentName:"tr",align:null},"Number of requests.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"jetty_requests_active"),(0,l.kt)("td",{parentName:"tr",align:null},"Gauge"),(0,l.kt)("td",{parentName:"tr",align:null},"Number of requests currently active.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"jetty_requests_active_max"),(0,l.kt)("td",{parentName:"tr",align:null},"Gauge"),(0,l.kt)("td",{parentName:"tr",align:null},"Maximum number of requests that have been active at once.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"jetty_request_time_max_seconds"),(0,l.kt)("td",{parentName:"tr",align:null},"Gauge"),(0,l.kt)("td",{parentName:"tr",align:null},"Maximum time spent handling requests.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"jetty_request_time_seconds_total"),(0,l.kt)("td",{parentName:"tr",align:null},"Counter"),(0,l.kt)("td",{parentName:"tr",align:null},"Total time spent in all request handling.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"jetty_dispatched_total"),(0,l.kt)("td",{parentName:"tr",align:null},"Counter"),(0,l.kt)("td",{parentName:"tr",align:null},"Number of dispatches.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"jetty_dispatched_active"),(0,l.kt)("td",{parentName:"tr",align:null},"Gauge"),(0,l.kt)("td",{parentName:"tr",align:null},"Number of dispatches currently active.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"jetty_dispatched_active_max"),(0,l.kt)("td",{parentName:"tr",align:null},"Gauge"),(0,l.kt)("td",{parentName:"tr",align:null},"Maximum number of active dispatches being handled.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"jetty_dispatched_time_max"),(0,l.kt)("td",{parentName:"tr",align:null},"Gauge"),(0,l.kt)("td",{parentName:"tr",align:null},"Maximum time spent in dispatch handling.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"jetty_dispatched_time_seconds_total"),(0,l.kt)("td",{parentName:"tr",align:null},"Counter"),(0,l.kt)("td",{parentName:"tr",align:null},"Total time spent in dispatch handling.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"jetty_async_requests_total"),(0,l.kt)("td",{parentName:"tr",align:null},"Counter"),(0,l.kt)("td",{parentName:"tr",align:null},"Total number of async requests.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"jetty_async_requests_waiting"),(0,l.kt)("td",{parentName:"tr",align:null},"Gauge"),(0,l.kt)("td",{parentName:"tr",align:null},"Currently waiting async requests.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"jetty_async_requests_waiting_max"),(0,l.kt)("td",{parentName:"tr",align:null},"Gauge"),(0,l.kt)("td",{parentName:"tr",align:null},"Maximum number of waiting async requests.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"jetty_async_dispatches_total"),(0,l.kt)("td",{parentName:"tr",align:null},"Counter"),(0,l.kt)("td",{parentName:"tr",align:null},"Number of requested that have been asynchronously dispatched.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"jetty_expires_total"),(0,l.kt)("td",{parentName:"tr",align:null},"Counter"),(0,l.kt)("td",{parentName:"tr",align:null},"Number of async requests requests that have expired.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"jetty_responses_total"),(0,l.kt)("td",{parentName:"tr",align:null},"Counter"),(0,l.kt)("td",{parentName:"tr",align:null},"Number of responses, labeled by status code. The ",(0,l.kt)("inlineCode",{parentName:"td"},"code"),' label can be "1xx", "2xx", "3xx", "4xx", or "5xx".')),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"jetty_stats_seconds"),(0,l.kt)("td",{parentName:"tr",align:null},"Gauge"),(0,l.kt)("td",{parentName:"tr",align:null},"Time in seconds stats have been collected for.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"jetty_responses_bytes_total"),(0,l.kt)("td",{parentName:"tr",align:null},"Counter"),(0,l.kt)("td",{parentName:"tr",align:null},"Total number of bytes across all responses.")))),(0,l.kt)("h2",{id:"monitor"},"Monitor"),(0,l.kt)("p",null,"You can ",(0,l.kt)("a",{parentName:"p",href:"https://prometheus.io/"},"set up a Prometheus instance")," to collect all the metrics exposed at Pulsar components and set up ",(0,l.kt)("a",{parentName:"p",href:"https://grafana.com/"},"Grafana")," dashboards to display the metrics and monitor your Pulsar cluster."),(0,l.kt)("p",null,"The following are some Grafana dashboards examples:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"http://pulsar.apache.org/docs/en/deploy-monitoring/#grafana"},"pulsar-grafana"),": A grafana dashboard that displays metrics collected in Prometheus for Pulsar clusters running on Kubernetes."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://github.com/streamnative/apache-pulsar-grafana-dashboard"},"apache-pulsar-grafana-dashboard"),": A collection of grafana dashboard templates for different Pulsar components running on both Kubernetes and on-premise machines.")))}d.isMDXComponent=!0}}]);